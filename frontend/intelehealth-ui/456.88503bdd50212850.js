"use strict";(self.webpackChunkintelehealth_ui=self.webpackChunkintelehealth_ui||[]).push([[456],{1456:(Ee,k,h)=>{h.r(k),h.d(k,{CalendarModule:()=>qe});var v=h(6895),y=h(4476),f=h(2200),S=h(3413),D=h(1144),m=h(5439),A=h(2340),J=h(8929),w=h(4465),g=h(7266),e=h(4650),Z=h(7154),P=h(349),H=h(6270),I=h(5703),Y=h(7185),M=h(9383),b=h(1377),N=h(5321),T=h(5498),L=h(3274),B=h(2615);function V(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"mwl-calendar-day-view",35),e.NdJ("eventClicked",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.handleEvent("dayView",o.event))})("hourSegmentClicked",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.hourSegmentClicked(o))}),e.qZA()}if(2&r){const t=e.oxw(),n=e.MAs(43),o=e.MAs(41),i=e.MAs(47);e.Q6J("viewDate",t.viewDate)("locale",t.locale)("hourDuration",30)("dayStartHour",0)("dayStartMinute",0)("dayEndHour",23)("dayEndMinute",59)("hourSegmentHeight",100)("hourSegments",1)("currentTimeMarkerTemplate",n)("hourSegmentTemplate",o)("events",t.events)("eventTemplate",i)("refresh",t.refresh)}}function Q(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"mwl-calendar-week-view",36),e.NdJ("eventClicked",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.handleEvent("weekView",o.event))})("hourSegmentClicked",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.hourSegmentClicked(o))})("dayHeaderClicked",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.dayClicked("weekView",o.day))}),e.qZA()}if(2&r){const t=e.oxw(),n=e.MAs(51),o=e.MAs(41),i=e.MAs(45),l=e.MAs(49);e.Q6J("viewDate",t.viewDate)("locale",t.locale)("weekStartsOn",1)("events",t.events)("hourDuration",30)("dayStartHour",0)("dayStartMinute",0)("dayEndHour",23)("dayEndMinute",59)("hourSegmentHeight",100)("hourSegments",1)("headerTemplate",n)("hourSegmentTemplate",o)("currentTimeMarkerTemplate",i)("eventTemplate",l)("refresh",t.refresh)}}function $(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"mwl-calendar-month-view",37),e.NdJ("dayClicked",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.dayClicked("monthView",o.day))})("eventClicked",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.handleEvent("monthView",o.event))}),e.qZA()}if(2&r){const t=e.oxw(),n=e.MAs(53),o=e.MAs(55);e.Q6J("viewDate",t.viewDate)("locale",t.locale)("weekStartsOn",1)("events",t.events)("headerTemplate",n)("cellTemplate",o)("refresh",t.refresh)}}function G(r,c){if(1&r&&(e.TgZ(0,"div",40)(1,"span"),e._uU(2),e.ALo(3,"date"),e.ALo(4,"translate"),e.ALo(5,"date"),e.qZA(),e._UZ(6,"div",41),e.qZA()),2&r){const t=e.oxw().segment;e.xp6(2),e.AsE("",e.xi3(3,2,t.displayDate,"hh:mm"),"",e.lcZ(4,5,e.xi3(5,7,t.displayDate,"a")),"")}}const q=function(){return{}};function W(r,c){if(1&r&&(e.TgZ(0,"div",38),e.ALo(1,"calendarA11y"),e.YNc(2,G,7,10,"div",39),e.qZA()),2&r){const t=c.segment,n=c.segmentHeight,o=c.isTimeLabel,i=c.daysInWeek,l=e.oxw();e.Udp("height",n,"px"),e.ekj("cal-hour-start",t.isStart)("cal-after-hour-start",!t.isStart)("dayOff",l.checkIfDayOff(t.date)),e.Q6J("ngClass",t.cssClass),e.uIk("aria-hidden",e.xi3(1,11,e.DdM(14,q),1===i?"hideDayHourSegment":"hideWeekHourSegment")),e.xp6(2),e.Q6J("ngIf",o)}}function j(r,c){if(1&r&&(e.TgZ(0,"div",43),e._UZ(1,"div",44),e.qZA()),2&r){const t=e.oxw().topPx;e.Udp("top",t,"px")}}function z(r,c){1&r&&e.YNc(0,j,2,2,"div",42),2&r&&e.Q6J("ngIf",c.isVisible)}function R(r,c){if(1&r&&(e.TgZ(0,"div",46),e._UZ(1,"div",44),e.qZA()),2&r){const t=e.oxw().topPx;e.Udp("top",t,"px")}}function K(r,c){1&r&&e.YNc(0,R,2,2,"div",45),2&r&&e.Q6J("ngIf",c.isVisible)}const E=function(r,c){return{backgroundColor:r,borderColor:c}},U=function(r,c){return{event:r,locale:c}};function X(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"div",47),e.NdJ("mwlClick",function(o){const l=e.CHM(t).eventClicked;return e.KtG(l.emit({sourceEvent:o}))})("mwlKeydownEnter",function(o){const l=e.CHM(t).eventClicked;return e.KtG(l.emit({sourceEvent:o}))}),e.ALo(1,"calendarEventTitle"),e.ALo(2,"calendarA11y"),e.TgZ(3,"div",48)(4,"div",49),e._UZ(5,"img",50),e.TgZ(6,"div",51)(7,"h6",6),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"p",6),e._uU(11),e.ALo(12,"date"),e.ALo(13,"translate"),e.ALo(14,"lowercase"),e.ALo(15,"date"),e.ALo(16,"date"),e.ALo(17,"translate"),e.ALo(18,"lowercase"),e.ALo(19,"date"),e.qZA()()(),e.TgZ(20,"div",49),e._UZ(21,"img",52),e.TgZ(22,"div",51)(23,"h6",6),e._uU(24),e.ALo(25,"noValue"),e.ALo(26,"translate"),e.ALo(27,"noValue"),e.ALo(28,"translate"),e.ALo(29,"translate"),e.ALo(30,"noValue"),e.qZA(),e.TgZ(31,"p",6),e._uU(32),e.ALo(33,"translate"),e.qZA()()(),e.TgZ(34,"div",49),e._UZ(35,"img",52),e.TgZ(36,"div",51)(37,"h6",6),e._uU(38),e.ALo(39,"noValue"),e.ALo(40,"translate"),e.ALo(41,"noValue"),e.ALo(42,"translate"),e.ALo(43,"translate"),e.ALo(44,"noValue"),e.qZA(),e.TgZ(45,"p",6),e._uU(46),e.ALo(47,"translate"),e.qZA()()()()()}if(2&r){const t=c.weekEvent,n=c.tooltipPlacement,o=c.tooltipTemplate,i=c.tooltipAppendToBody,l=c.tooltipDisabled,d=c.tooltipDelay,s=c.daysInWeek,p=e.oxw();e.Q6J("ngStyle",e.WLB(86,E,null==t.event.color?null:t.event.color.secondary,null==t.event.color?null:t.event.color.primary))("mwlCalendarTooltip",l?"":e.Dn7(1,23,t.event.title,1===s?"dayTooltip":"weekTooltip",t.tempEvent||t.event))("tooltipPlacement",n)("tooltipEvent",t.tempEvent||t.event)("tooltipTemplate",o)("tooltipAppendToBody",i)("tooltipDelay",d),e.uIk("aria-label",e.xi3(2,27,e.WLB(89,U,t.tempEvent||t.event,p.locale),"eventDescription")),e.xp6(8),e.Oqu(e.lcZ(9,30,(t.tempEvent||t.event).title)),e.xp6(3),e.HOy("",e.xi3(12,32,(t.tempEvent||t.event).start,"h:mm"),"",e.lcZ(13,35,e.lcZ(14,37,e.xi3(15,39,(t.tempEvent||t.event).start,"a")))," - ",e.xi3(16,42,(t.tempEvent||t.event).end,"h:mm"),"",e.lcZ(17,45,e.lcZ(18,47,e.xi3(19,49,(t.tempEvent||t.event).end,"a"))),""),e.xp6(10),e.Q6J("src",p.baseUrl+"/personimage/"+(t.tempEvent||t.event).meta.patientId,e.LSH),e.xp6(3),e.lnq("",e.xi3(25,52,null==(t.tempEvent||t.event).meta?null:(t.tempEvent||t.event).meta.patientName,e.lcZ(26,55,"NA"))," (",e.xi3(27,57,e.lcZ(28,60,null==(t.tempEvent||t.event).meta?null:(t.tempEvent||t.event).meta.patientGender),e.lcZ(29,62,"NA")),", ",e.xi3(30,64,null==(t.tempEvent||t.event).meta?null:(t.tempEvent||t.event).meta.patientAge,"0"),")"),e.xp6(8),e.Oqu(e.lcZ(33,67,"Patient")),e.xp6(3),e.Q6J("src",p.base+"/di/"+(t.tempEvent||t.event).meta.hwUUID+"_image.png",e.LSH),e.xp6(3),e.lnq("",e.xi3(39,69,null==(t.tempEvent||t.event).meta?null:(t.tempEvent||t.event).meta.hwName,e.lcZ(40,72,"NA"))," (",e.xi3(41,74,e.lcZ(42,77,null==(t.tempEvent||t.event).meta?null:(t.tempEvent||t.event).meta.hwGender),e.lcZ(43,79,"NA")),", ",e.xi3(44,81,null==(t.tempEvent||t.event).meta?null:(t.tempEvent||t.event).meta.hwAge,"0"),")"),e.xp6(8),e.Oqu(e.lcZ(47,84,"Health Worker"))}}function ee(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"div",53),e.NdJ("mwlClick",function(o){const l=e.CHM(t).eventClicked;return e.KtG(l.emit({sourceEvent:o}))})("mwlKeydownEnter",function(o){const l=e.CHM(t).eventClicked;return e.KtG(l.emit({sourceEvent:o}))}),e.ALo(1,"calendarEventTitle"),e.ALo(2,"calendarA11y"),e.TgZ(3,"div",54)(4,"h6",6),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"p",6),e._uU(8),e.ALo(9,"date"),e.ALo(10,"translate"),e.ALo(11,"lowercase"),e.ALo(12,"date"),e.ALo(13,"date"),e.ALo(14,"translate"),e.ALo(15,"lowercase"),e.ALo(16,"date"),e.qZA(),e.TgZ(17,"div",49),e._UZ(18,"img",52),e.TgZ(19,"div",51)(20,"h6",6),e._uU(21),e.ALo(22,"noValue"),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"h6",6),e._uU(25),e.ALo(26,"noValue"),e.ALo(27,"translate"),e.ALo(28,"translate"),e.ALo(29,"noValue"),e.qZA()()()()()}if(2&r){const t=c.weekEvent,n=c.tooltipPlacement,o=c.tooltipTemplate,i=c.tooltipAppendToBody,l=c.tooltipDisabled,d=c.tooltipDelay,s=c.daysInWeek,p=e.oxw();e.Q6J("ngStyle",e.WLB(61,E,null==t.event.color?null:t.event.color.secondary,null==t.event.color?null:t.event.color.primary))("mwlCalendarTooltip",l?"":e.Dn7(1,17,t.event.title,1===s?"dayTooltip":"weekTooltip",t.tempEvent||t.event))("tooltipPlacement",n)("tooltipEvent",t.tempEvent||t.event)("tooltipTemplate",o)("tooltipAppendToBody",i)("tooltipDelay",d),e.uIk("aria-label",e.xi3(2,21,e.WLB(64,U,t.tempEvent||t.event,p.locale),"eventDescription")),e.xp6(5),e.Oqu(e.lcZ(6,24,(t.tempEvent||t.event).title)),e.xp6(3),e.HOy("",e.xi3(9,26,(t.tempEvent||t.event).start,"h:mm")," ",e.lcZ(10,29,e.lcZ(11,31,e.xi3(12,33,(t.tempEvent||t.event).start,"a")))," - ",e.xi3(13,36,(t.tempEvent||t.event).end,"h:mm"),"",e.lcZ(14,39,e.lcZ(15,41,e.xi3(16,43,(t.tempEvent||t.event).end,"a"))),""),e.xp6(10),e.Q6J("src",p.baseUrl+"/personimage/"+(t.tempEvent||t.event).meta.patientId,e.LSH),e.xp6(3),e.Oqu(e.xi3(22,46,null==(t.tempEvent||t.event).meta?null:(t.tempEvent||t.event).meta.patientName,e.lcZ(23,49,"NA"))),e.xp6(4),e.AsE("(",e.xi3(26,51,e.lcZ(27,54,null==(t.tempEvent||t.event).meta?null:(t.tempEvent||t.event).meta.patientGender),e.lcZ(28,56,"NA")),", ",e.xi3(29,58,null==(t.tempEvent||t.event).meta?null:(t.tempEvent||t.event).meta.patientAge,"0"),")")}}function te(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"div",57),e.NdJ("mwlClick",function(o){const l=e.CHM(t).$implicit,d=e.oxw().dayHeaderClicked;return e.KtG(d.emit({day:l,sourceEvent:o}))})("drop",function(o){const l=e.CHM(t).$implicit,d=e.oxw().eventDropped;return e.KtG(d.emit({event:o.dropData.event,newStart:l.date}))})("dragEnter",function(){const i=e.CHM(t).$implicit,l=e.oxw().dragEnter;return e.KtG(l.emit({date:i.date}))}),e._uU(1),e.ALo(2,"date"),e.ALo(3,"translate"),e.ALo(4,"uppercase"),e.ALo(5,"date"),e.qZA()}if(2&r){const t=c.$implicit,n=e.oxw(2);e.ekj("cal-past",t.isPast)("cal-today",t.isToday)("cal-future",t.isFuture)("cal-weekend",t.isWeekend)("dayOff",n.checkIfDayOff(t.date)),e.Q6J("ngClass",t.cssClass),e.xp6(1),e.AsE(" ",e.xi3(2,13,t.date,"d")," ",e.lcZ(3,16,e.lcZ(4,18,e.xi3(5,20,t.date,"EEE")))," ")}}function ne(r,c){if(1&r&&(e.TgZ(0,"div",55),e.YNc(1,te,6,23,"div",56),e.qZA()),2&r){const t=c.days,n=c.trackByWeekDayHeaderDate;e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",n)}}function ae(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"div",60),e.NdJ("click",function(o){const l=e.CHM(t).$implicit,d=e.oxw(2);return e.KtG(d.columnHeaderClicked.emit({isoDayNumber:l.day,sourceEvent:o}))}),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"uppercase"),e.ALo(4,"date"),e.qZA()}if(2&r){const t=c.$implicit;e.ekj("cal-past",t.isPast)("cal-today",t.isToday)("cal-future",t.isFuture)("cal-weekend",t.isWeekend),e.Q6J("ngClass",t.cssClass),e.xp6(1),e.hij(" ",e.lcZ(2,10,e.lcZ(3,12,e.xi3(4,14,t.date,"EEE")))," ")}}function oe(r,c){if(1&r&&(e.TgZ(0,"div",58),e.YNc(1,ae,5,17,"div",59),e.qZA()),2&r){const t=c.days,n=c.trackByWeekDayHeaderDate;e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",n)}}function ie(r,c){1&r&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"s")))}function re(r,c){if(1&r&&(e.TgZ(0,"div",70),e._uU(1),e.ALo(2,"translate"),e.YNc(3,ie,3,3,"span",71),e.qZA()),2&r){const t=e.oxw(2).day,n=e.oxw();e.xp6(1),e.AsE("",n.getCount("Appointment",t.events)," ",e.lcZ(2,3,"Appointment"),""),e.xp6(2),e.Q6J("ngIf",n.getCount("Appointment",t.events)>1)}}function le(r,c){1&r&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"s")))}function se(r,c){if(1&r&&(e.TgZ(0,"div",70),e._uU(1),e.ALo(2,"translate"),e.YNc(3,le,3,3,"span",71),e.qZA()),2&r){const t=e.oxw(2).day,n=e.oxw();e.xp6(1),e.AsE("",n.getCount("Follow-up visit",t.events)," ",e.lcZ(2,3,"Follow-up visit"),""),e.xp6(2),e.Q6J("ngIf",n.getCount("Follow-up visit",t.events)>1)}}const de=function(r){return{backgroundColor:r}},ce=function(r,c){return{event:r,draggedFrom:c}},me=function(r,c){return{x:r,y:c}},pe=function(){return{delay:300,delta:30}};function ue(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"div",73),e.NdJ("mouseenter",function(){e.CHM(t);const o=e.oxw().$implicit,i=e.oxw(2).highlightDay;return e.KtG(i.emit({event:o}))})("mouseleave",function(){e.CHM(t);const o=e.oxw().$implicit,i=e.oxw(2).unhighlightDay;return e.KtG(i.emit({event:o}))})("mwlClick",function(o){e.CHM(t);const i=e.oxw().$implicit,l=e.oxw(2).eventClicked;return e.KtG(l.emit({event:i,sourceEvent:o}))}),e.ALo(1,"calendarEventTitle"),e.ALo(2,"calendarA11y"),e._uU(3),e.ALo(4,"date"),e.ALo(5,"translate"),e.ALo(6,"lowercase"),e.ALo(7,"date"),e.ALo(8,"date"),e.ALo(9,"translate"),e.ALo(10,"lowercase"),e.ALo(11,"date"),e.qZA()}if(2&r){const t=e.oxw().$implicit,n=e.oxw(2),o=n.tooltipPlacement,i=n.tooltipTemplate,l=n.tooltipAppendToBody,d=n.tooltipDelay,s=n.day,p=n.validateDrag;e.ekj("cal-draggable",t.draggable),e.Q6J("ngStyle",e.VKq(46,de,null==t.color?null:t.color.primary))("ngClass",null==t?null:t.cssClass)("mwlCalendarTooltip",e.Dn7(1,19,t.title,"monthTooltip",t))("tooltipPlacement",o)("tooltipEvent",t)("tooltipTemplate",i)("tooltipAppendToBody",l)("tooltipDelay",d)("dropData",e.WLB(48,ce,t,s))("dragAxis",e.WLB(51,me,t.draggable,t.draggable))("validateDrag",p)("touchStartLongPress",e.DdM(54,pe)),e.uIk("aria-hidden",e.xi3(2,23,e.DdM(55,q),"hideMonthCellEvents")),e.xp6(3),e.HOy(" ",e.xi3(4,26,t.start,"h:mm"),"",e.lcZ(5,29,e.lcZ(6,31,e.xi3(7,33,t.start,"a")))," - ",e.xi3(8,36,t.end,"h:mm")," ",e.lcZ(9,39,e.lcZ(10,41,e.xi3(11,43,t.end,"a")))," ")}}function he(r,c){if(1&r&&(e.ynx(0),e.YNc(1,ue,12,56,"div",72),e.BQk()),2&r){const t=c.index;e.xp6(1),e.Q6J("ngIf",t<2)}}function ge(r,c){if(1&r&&(e.TgZ(0,"div",74),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r){const t=e.oxw(2).day;e.xp6(1),e.AsE(" ",t.events.length-2," ",e.lcZ(2,2,"more"),"... ")}}function fe(r,c){if(1&r&&(e.TgZ(0,"div",66),e.YNc(1,re,4,5,"div",67),e.YNc(2,se,4,5,"div",67),e.YNc(3,he,2,1,"ng-container",68),e.YNc(4,ge,3,4,"div",69),e.qZA()),2&r){const t=e.oxw(),n=t.day,o=t.trackByEventId,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.getCount("Appointment",n.events)),e.xp6(1),e.Q6J("ngIf",i.getCount("Follow-up visit",n.events)),e.xp6(1),e.Q6J("ngForOf",n.events)("ngForTrackBy",o),e.xp6(1),e.Q6J("ngIf",n.events.length>2)}}const _e=function(r,c){return{day:r,locale:c}};function ve(r,c){if(1&r&&(e.TgZ(0,"div")(1,"div",61),e.ALo(2,"calendarA11y"),e.TgZ(3,"span",62)(4,"span",63),e._uU(5),e.ALo(6,"calendarDate"),e.qZA()(),e.TgZ(7,"div",64),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.YNc(10,fe,5,5,"div",65),e.qZA()),2&r){const t=c.day,n=c.locale,o=e.oxw();e.ekj("dayOff",o.checkIfDayOff(t.date)),e.xp6(1),e.uIk("aria-label",e.xi3(2,6,e.WLB(15,_e,t,n),"monthCell")),e.xp6(4),e.Oqu(e.Dn7(6,9,t.date,"monthViewDayNumber",n)),e.xp6(3),e.hij(" ",e.lcZ(9,13,"Day Off")," "),e.xp6(2),e.Q6J("ngIf",t.events.length>0)}}let we=(()=>{class r{constructor(t,n,o,i,l,d,s){this.pageTitleService=t,this.appointmentService=n,this.visitService=o,this.coreService=i,this.router=l,this.toastr=d,this.translateService=s,this.viewDate=new Date,this.view=f.wr.Day,this.CalendarView=f.wr,this.events=[],this.baseUrl=A.N.baseURL,this.base=A.N.base,this.fetchedYears=[],this.fetchedMonths=[],this.daysOff=[],this.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],this.refresh=new J.xQ}ngOnInit(){this.translateService.use((0,w.TL)(!1,g.Mj.SELECTED_LANGUAGE)),this.pageTitleService.setTitle({title:"",imgUrl:"assets/svgs/menu-calendar-circle.svg"}),this.user=(0,w.TL)(!0,g.On.USER),this.provider=(0,w.TL)(!0,g.On.PROVIDER),this.fetchedYears.push((new Date).getFullYear()),this.fetchedMonths.push(`${m(new Date).format("MMMM")} ${m(new Date).format("YYYY")}`),this.getFollowUpVisit(),this.getAppointments(m().startOf("year").format("DD/MM/YYYY"),m().endOf("year").format("DD/MM/YYYY")),this.getSchedule()}dateChanged(t){-1==this.fetchedYears.indexOf(t.getFullYear())&&(this.fetchedYears.push(t.getFullYear()),this.getAppointments(m(t).startOf("year").format("DD/MM/YYYY"),m(t).endOf("year").format("DD/MM/YYYY"))),-1==this.fetchedMonths.indexOf(`${m(t).format("MMMM")} ${m(t).format("YYYY")}`)&&(this.fetchedMonths.push(`${m(t).format("MMMM")} ${m(t).format("YYYY")}`),this.getSchedule(m(t).format("YYYY"),m(t).format("MMMM")))}getAppointments(t,n){this.appointmentService.getUserSlots((0,w.TL)(!0,g.On.USER).uuid,t,n).subscribe(o=>{o.data.forEach(l=>{"booked"==l.status&&("Awaiting Consult"==l.visitStatus||"Visit In Progress"==l.visitStatus)&&l.visit&&(this.events.find(d=>d.id==l.visitUuid&&"Appointment"==d.title&&d.meta?.id==l.id)||this.events.push({id:l.visitUuid,title:"Appointment",start:m(l.slotJsDate).toDate(),end:m(l.slotJsDate).add(l.slotDuration,l.slotDurationUnit).toDate(),meta:l}))}),setTimeout(()=>{this.refresh.next()},500)})}getSchedule(t=m(new Date).format("YYYY"),n=m(new Date).format("MMMM")){this.appointmentService.getUserAppoitment(this.userId,t,n).subscribe({next:o=>{o&&o.data?(o.data.daysOff||(o.data.daysOff=[]),this.daysOff.push(o.data)):this.daysOff.push({type:"month",month:n,year:t,daysOff:[],slotSchedule:[],startDate:m(`${n} ${t}`,"MMMM yyyy").startOf("month").add(1,"day").toISOString(),endDate:m(`${n} ${t}`,"MMMM yyyy").endOf("month").toISOString(),drName:this.drName,userUuid:this.userId,speciality:this.getSpeciality(),slotDays:""})}})}getFollowUpVisit(){this.appointmentService.getFollowUpVisit(this.providerId).subscribe({next:t=>{t&&t.forEach(o=>{this.visitService.fetchVisitDetails(o.visit_id).subscribe(i=>{let l=o.followup_text.includes("Time:")?m(o.followup_text.split(", Time: ")[0]).format("YYYY-MM-DD"):m(o.followup_text.split(", Remark: ")[0]).format("YYYY-MM-DD"),d=o.followup_text.includes("Time:")?o.followup_text.split(", Time: ")[1].split(", Remark: ")[0]:null,s=d?m(l+" "+d,"YYYY-MM-DD hh:mm a").toDate():(0,S.Z)((0,D.Z)(new Date(l),0),9),p=d?m(l+" "+d,"YYYY-MM-DD hh:mm a").add(30,"minutes").toDate():(0,S.Z)((0,D.Z)(new Date(l),30),9);if(m(s).isValid()&&m(p).isValid()){let u=this.getHW(i.encounters);this.events.push({id:i.uuid,title:"Follow-up visit",start:s,end:p,meta:{createdAt:this.getCreatedAtTime(i.encounters),drName:this.provider?.person.display,hwAge:u.hwAge,hwGender:u.hwGender,hwName:u.hwName,hwPic:null,hwUUID:u.hwProviderUuid,openMrsId:i.patient.identifiers[0].identifier,patientAge:i.patient.person.age,patientGender:i.patient.person.gender,patientId:i.patient.uuid,patientName:i.patient.person.display,patientPic:null,slotDate:m(l).format("DD/MM/YYYY"),slotDay:m(l).format("dddd"),slotDuration:30,slotDurationUnit:"minutes",slotJsDate:m(s).utc().format(),slotTime:d||"9:00 AM",type:"follow-up visit",userUuid:this.user.uuid,visitUuid:i.uuid,visit_info:i}})}})})}})}getCreatedAtTime(t){let n="";return t.forEach(o=>{null!==o.display.match(g.fj.VISIT_NOTE)&&(n=o.encounterDatetime)}),n}getHW(t){let n={hwName:null,hwAge:null,hwGender:null,hwProviderUuid:null};return t.forEach(o=>{null!==o.display.match(g.fj.ADULTINITIAL)&&(n.hwName=o.encounterProviders[0].provider.person.display,n.hwAge=o.encounterProviders[0].provider.person.age,n.hwGender=o.encounterProviders[0].provider.person.gender,n.hwProviderUuid=o.encounterProviders[0].provider.uuid)}),n}get providerId(){return(0,w.TL)(!0,g.On.PROVIDER).uuid}get userId(){return(0,w.TL)(!0,g.On.USER).uuid}get drName(){return(0,w.TL)(!0,g.On.USER)?.person?.display||(0,w.TL)(!0,g.On.USER)?.display}getSpeciality(){return(0,w.TL)(!0,g.On.PROVIDER).attributes.find(t=>t.display.includes(g.On.SPECIALIZATION)).value}onTabChanged(t){switch(t){case 0:this.setView(f.wr.Day);break;case 1:this.setView(f.wr.Week);break;case 2:this.setView(f.wr.Month)}}setView(t){this.view=t}getCount(t,n){let o=0;return n.forEach(i=>{i.title==t&&o++}),o}dayClicked(t,n){if("monthView"==t){let o=this.daysOff.find(i=>i.month==this.monthNames[n.date.getMonth()]&&i.year==n.date.getFullYear().toString());if(o&&-1!=o.daysOff.indexOf(m(n.date).format("DD/MM/YYYY")))return void this.toastr.warning(this.translateService.instant("This day is already marked as Day Off"),this.translateService.instant("Already DayOff"));this.coreService.openAppointmentDetailMonthViewModal(n).subscribe(i=>{if(i)switch(i.markAs){case"dayOff":this.coreService.openConfirmDayOffModal(n.date).subscribe(l=>{if(l){let d={userUuid:this.userId,daysOff:o?o.daysOff.concat([m(n.date).format("DD/MM/YYYY")]):[m(n.date).format("DD/MM/YYYY")],month:this.monthNames[n.date.getMonth()],year:n.date.getFullYear().toString()};this.appointmentService.updateDaysOff(d).subscribe({next:s=>{if(s.status){let p=this.daysOff.findIndex(_=>_.month==this.monthNames[n.date.getMonth()]&&_.year==n.date.getFullYear().toString());-1!=p&&(this.daysOff[p].daysOff=this.daysOff[p].daysOff?this.daysOff[p].daysOff.concat(m(n.date).format("DD/MM/YYYY")):[m(n.date).format("DD/MM/YYYY")]),n.events.forEach(_=>{"Appointment"==_.title&&this.cancel(_.meta,!1)});let u=this.daysOff.find(_=>_.month==this.monthNames[n.date.getMonth()]&&_.year==n.date.getFullYear().toString());u?.slotSchedule.length&&(u.slotSchedule=u.slotSchedule.filter(_=>!m(n.date).isSame(m(_.date))),this.appointmentService.updateOrCreateAppointment(u).subscribe({next:_=>{_.status&&(this.daysOff[p]=u)}}))}}})}});break;case"hoursOff":this.coreService.openConfirmHoursOffModal({day:n.date,detail:i}).subscribe(l=>{l&&n.events.forEach(d=>{"Appointment"==d.title&&m(d.meta.slotTime,"LT").isBetween(m(i.from,"LT"),m(i.to,"LT"))&&this.cancel(d.meta,!1)})})}})}}handleEvent(t,n){("dayView"==t||"weekView"==t)&&this.coreService.openAppointmentDetailDayViewModal(n).subscribe(o=>{if(o)switch(o){case"view":this.router.navigate(["/dashboard/visit-summary",n.id]);break;case"reschedule":this.reschedule(n.meta);break;case"cancel":this.cancel(n.meta)}})}cancel(t,n=!0){n?this.coreService.openConfirmCancelAppointmentModal(t).subscribe(o=>{o&&(this.events.splice(this.events.findIndex(i=>i.id==t.visitUuid&&"Appointment"==i.title&&i.meta?.id==t.id),1),this.toastr.success(this.translateService.instant("The Appointment has been successfully canceled."),this.translateService.instant("Canceling successful")),setTimeout(()=>{this.refresh.next()},500))}):this.appointmentService.cancelAppointment({id:t.id,visitUuid:t.visitUuid,hwUUID:this.userId}).subscribe(i=>{i&&i.status&&(this.events.splice(this.events.findIndex(l=>l.id==t.visitUuid&&"Appointment"==l.title&&l.meta?.id==t.id),1),setTimeout(()=>{this.refresh.next()},500))})}reschedule(t){const n=t.visit.encounters.filter(i=>i.type.name.includes(g.fj.PATIENT_EXIT_SURVEY)||i.type.name.includes(g.fj.VISIT_COMPLETE)).length;Boolean(n)?this.toastr.error(this.translateService.instant("Visit is already completed, it can't be rescheduled."),this.translateService.instant("Rescheduling failed")):this.coreService.openRescheduleAppointmentModal(t).subscribe(i=>{if(i){let l=i;this.coreService.openRescheduleAppointmentConfirmModal({appointment:t,newSlot:l}).subscribe(d=>{d&&(t.appointmentId=t.id,t.slotDate=m(l.date,"YYYY-MM-DD").format("DD/MM/YYYY"),t.slotTime=l.slot,delete t.visit_info,this.appointmentService.rescheduleAppointment(t).subscribe(s=>{const p=s.message;s.status?(this.events.splice(this.events.findIndex(u=>u.id==t.visitUuid&&"Appointment"==u.title&&u.meta?.id==t.id),1),this.events.push({id:t.visitUuid,title:"Appointment",start:m(s.data.slotJsDate).toDate(),end:m(s.data.slotJsDate).add(s.data.slotDuration,s.data.slotDurationUnit).toDate(),meta:s.data}),this.toastr.success(this.translateService.instant("The appointment has been rescheduled successfully!"),this.translateService.instant("Rescheduling successful!"))):this.toastr.success(p,this.translateService.instant("Rescheduling failed!"))}))})}})}checkIfDayOff(t){let n=this.daysOff.find(o=>o.month==this.monthNames[t.getMonth()]&&o.year==t.getFullYear().toString());return!(!n||!n?.daysOff||-1==n.daysOff.indexOf(m(t).format("DD/MM/YYYY")))}get locale(){return(0,w.TL)(!1,g.Mj.SELECTED_LANGUAGE)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Z.Z),e.Y36(P.H),e.Y36(H.W),e.Y36(I.p),e.Y36(y.F0),e.Y36(Y._W),e.Y36(M.sK))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-calendar"]],decls:56,vars:29,consts:[[1,"container-fluid"],[1,"row","setup-title-con"],[1,"col","p-0","pb-2"],[1,"title-con","d-flex","align-items-center"],["src","assets/svgs/menu-calendar-circle.svg","alt","",1,"mr-2"],[1,"d-flex","flex-column"],[1,"mb-0"],["mat-button","","routerLink","/calendar/setup-calendar","data-test-id","btnManageCal",1,"view-btn"],[1,"row"],[1,"col-md-12","p-0","pt-3"],[1,"intel-card"],[1,"col-md-6","p-0"],["mat-align-tabs","start",1,"calendar-tab-group",3,"disableRipple","selectedIndexChange"],["data-test-id","tabDaily",3,"label"],["data-test-id","tabWeekly",3,"label"],["data-test-id","tabMonthly",3,"label"],[1,"header-date-con"],["src","assets/svgs/calendar-white.svg","alt","",1,"mr-2"],[1,"mb-0","mr-2"],["mwlCalendarPreviousView","","data-test-id","btnCalPreviousView",1,"arrow-btn","mr-2",3,"view","viewDate","viewDateChange"],["src","assets/svgs/chevron-left.svg","alt","","width","100%"],["mwlCalendarNextView","","data-test-id","btnCalNextView",1,"arrow-btn",3,"view","viewDate","viewDateChange"],["src","assets/svgs/chevron-right.svg","alt","","width","100%"],[3,"ngSwitch"],["class","day-view-con",3,"viewDate","locale","hourDuration","dayStartHour","dayStartMinute","dayEndHour","dayEndMinute","hourSegmentHeight","hourSegments","currentTimeMarkerTemplate","hourSegmentTemplate","events","eventTemplate","refresh","eventClicked","hourSegmentClicked",4,"ngSwitchCase"],["class","week-view-con",3,"viewDate","locale","weekStartsOn","events","hourDuration","dayStartHour","dayStartMinute","dayEndHour","dayEndMinute","hourSegmentHeight","hourSegments","headerTemplate","hourSegmentTemplate","currentTimeMarkerTemplate","eventTemplate","refresh","eventClicked","hourSegmentClicked","dayHeaderClicked",4,"ngSwitchCase"],[3,"viewDate","locale","weekStartsOn","events","headerTemplate","cellTemplate","refresh","dayClicked","eventClicked",4,"ngSwitchCase"],["hourSegmentTemplate",""],["currentTimeMarkerTemplate",""],["currentTimeMarkerTemplate2",""],["eventTemplate",""],["eventTemplate2",""],["headerTemplate",""],["monthHeaderTemplate",""],["cellTemplate",""],[1,"day-view-con",3,"viewDate","locale","hourDuration","dayStartHour","dayStartMinute","dayEndHour","dayEndMinute","hourSegmentHeight","hourSegments","currentTimeMarkerTemplate","hourSegmentTemplate","events","eventTemplate","refresh","eventClicked","hourSegmentClicked"],[1,"week-view-con",3,"viewDate","locale","weekStartsOn","events","hourDuration","dayStartHour","dayStartMinute","dayEndHour","dayEndMinute","hourSegmentHeight","hourSegments","headerTemplate","hourSegmentTemplate","currentTimeMarkerTemplate","eventTemplate","refresh","eventClicked","hourSegmentClicked","dayHeaderClicked"],[3,"viewDate","locale","weekStartsOn","events","headerTemplate","cellTemplate","refresh","dayClicked","eventClicked"],[1,"cal-hour-segment-con",3,"ngClass"],["class","cal-time-con",4,"ngIf"],[1,"cal-time-con"],[1,"marker"],["class","cal-current-time-marker",3,"top",4,"ngIf"],[1,"cal-current-time-marker"],[1,"round"],["class","cal-current-time-marker-2",3,"top",4,"ngIf"],[1,"cal-current-time-marker-2"],["tabindex","0","role","application",1,"cal-event-con",3,"ngStyle","mwlCalendarTooltip","tooltipPlacement","tooltipEvent","tooltipTemplate","tooltipAppendToBody","tooltipDelay","mwlClick","mwlKeydownEnter"],["data-test-id","mwlCalDayView",1,"event-con"],[1,"con-item"],["src","assets/svgs/appointment.svg","alt","",1,"mr-2"],[1,"con-info"],["alt","",1,"mr-1",3,"src"],["tabindex","0","role","application",1,"cal-event-con-2",3,"ngStyle","mwlCalendarTooltip","tooltipPlacement","tooltipEvent","tooltipTemplate","tooltipAppendToBody","tooltipDelay","mwlClick","mwlKeydownEnter"],["data-test-id","mwlCalWeekView",1,"event-con"],["role","row",1,"cal-day-headers-con"],["class","cal-header-con","mwlDroppable","","dragOverClass","cal-drag-over","tabindex","0","role","columnheader",3,"cal-past","cal-today","cal-future","cal-weekend","dayOff","ngClass","mwlClick","drop","dragEnter",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragOverClass","cal-drag-over","tabindex","0","role","columnheader",1,"cal-header-con",3,"ngClass","mwlClick","drop","dragEnter"],["role","row",1,"cal-cell-row-con","cal-header-con"],["class","cal-cell-con","tabindex","0","role","columnheader",3,"cal-past","cal-today","cal-future","cal-weekend","ngClass","click",4,"ngFor","ngForOf","ngForTrackBy"],["tabindex","0","role","columnheader",1,"cal-cell-con",3,"ngClass","click"],["data-test-id","mwlCalMonthView",1,"cal-cell-top-con"],["aria-hidden","true"],[1,"cal-day-number-con"],[1,"day-off-con"],["class","cal-events-con",4,"ngIf"],[1,"cal-events-con"],["class","event-badge",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","cal-event-con2",4,"ngIf"],[1,"event-badge"],[4,"ngIf"],["class","cal-event-con2","mwlDraggable","","dragActiveClass","cal-drag-active",3,"ngStyle","ngClass","mwlCalendarTooltip","tooltipPlacement","tooltipEvent","tooltipTemplate","tooltipAppendToBody","tooltipDelay","cal-draggable","dropData","dragAxis","validateDrag","touchStartLongPress","mouseenter","mouseleave","mwlClick",4,"ngIf"],["mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event-con2",3,"ngStyle","ngClass","mwlCalendarTooltip","tooltipPlacement","tooltipEvent","tooltipTemplate","tooltipAppendToBody","tooltipDelay","dropData","dragAxis","validateDrag","touchStartLongPress","mouseenter","mouseleave","mwlClick"],[1,"cal-event-con2"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"img",4),e.TgZ(5,"div",5)(6,"h6",6),e._uU(7),e.ALo(8,"translate"),e.qZA()()()(),e.TgZ(9,"div",2)(10,"button",7),e._uU(11),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"div",8)(14,"div",9)(15,"div",10)(16,"div",0)(17,"div",8)(18,"div",11)(19,"mat-tab-group",12),e.NdJ("selectedIndexChange",function(i){return n.onTabChanged(i)}),e._UZ(20,"mat-tab",13),e.ALo(21,"translate"),e._UZ(22,"mat-tab",14),e.ALo(23,"translate"),e._UZ(24,"mat-tab",15),e.ALo(25,"translate"),e.qZA()(),e.TgZ(26,"div",11)(27,"div",16),e._UZ(28,"img",17),e.TgZ(29,"h6",18),e._uU(30),e.ALo(31,"calendarDate"),e.qZA(),e.TgZ(32,"button",19),e.NdJ("viewDateChange",function(i){return n.viewDate=i})("viewDateChange",function(i){return n.dateChanged(i)}),e._UZ(33,"img",20),e.qZA(),e.TgZ(34,"button",21),e.NdJ("viewDateChange",function(i){return n.viewDate=i})("viewDateChange",function(i){return n.dateChanged(i)}),e._UZ(35,"img",22),e.qZA()()()()(),e.TgZ(36,"div",23),e.YNc(37,V,1,14,"mwl-calendar-day-view",24),e.YNc(38,Q,1,16,"mwl-calendar-week-view",25),e.YNc(39,$,1,7,"mwl-calendar-month-view",26),e.qZA(),e.YNc(40,W,3,15,"ng-template",null,27,e.W1O),e.YNc(42,z,1,1,"ng-template",null,28,e.W1O),e.YNc(44,K,1,1,"ng-template",null,29,e.W1O),e.YNc(46,X,48,92,"ng-template",null,30,e.W1O),e.YNc(48,ee,30,67,"ng-template",null,31,e.W1O),e.YNc(50,ne,2,2,"ng-template",null,32,e.W1O),e.YNc(52,oe,2,2,"ng-template",null,33,e.W1O),e.YNc(54,ve,11,18,"ng-template",null,34,e.W1O),e.qZA()()()()),2&t&&(e.xp6(7),e.Oqu(e.lcZ(8,15,"Your calendar")),e.xp6(4),e.Oqu(e.lcZ(12,17,"Manage calendar")),e.xp6(8),e.Q6J("disableRipple",!0),e.xp6(1),e.s9C("label",e.lcZ(21,19,"Daily")),e.xp6(2),e.s9C("label",e.lcZ(23,21,"Weekly")),e.xp6(2),e.s9C("label",e.lcZ(25,23,"Monthly")),e.xp6(6),e.Oqu(e.Dn7(31,25,n.viewDate,n.view+"ViewTitle",n.locale)),e.xp6(2),e.Q6J("view",n.view)("viewDate",n.viewDate),e.xp6(2),e.Q6J("view",n.view)("viewDate",n.viewDate),e.xp6(2),e.Q6J("ngSwitch",n.view),e.xp6(1),e.Q6J("ngSwitchCase",n.CalendarView.Day),e.xp6(1),e.Q6J("ngSwitchCase",n.CalendarView.Week),e.xp6(1),e.Q6J("ngSwitchCase",n.CalendarView.Month))},dependencies:[v.mk,v.sg,v.O5,v.PC,v.RF,v.n9,y.rH,b.lW,f.wi,f.YX,f.MG,f.Vw,f.Tl,N.pD,N.D5,f.GH,f.TK,f.Se,T.SP,T.uX,L.z,v.gd,v.i8,v.uU,f.vk,f.CG,f.rL,B.U,M.X$],styles:[".setup-title-con[_ngcontent-%COMP%]   .title-con[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:44px}.setup-title-con[_ngcontent-%COMP%]   .title-con[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-weight:700;font-size:18px;color:var(--color-darkestBlue)}.setup-title-con[_ngcontent-%COMP%]   .title-con[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:var(--color-gray)}.setup-title-con[_ngcontent-%COMP%]   .view-btn[_ngcontent-%COMP%]{text-decoration:none;background:var(--color-lightGray);border-radius:8px;height:44px;color:var(--color-darkBlue);font-weight:700;font-size:18px;float:right}.intel-card[_ngcontent-%COMP%]{overflow:hidden}  .calendar-tab-group.mat-tab-group{font-family:DM Sans}  .calendar-tab-group.mat-tab-group .mat-tab-body-wrapper .mat-tab-body .mat-tab-body-content{padding:0}  .calendar-tab-group.mat-tab-group .mat-tab-header{padding:24px 0 0;border-bottom:2px solid rgba(178,175,190,.2);box-shadow:none}  .calendar-tab-group.mat-tab-group .mat-tab-header .mat-tab-label-container .mat-ink-bar{background:var(--color-lightRed);border-radius:1px}  .calendar-tab-group.mat-tab-group .mat-tab-header .mat-tab-label-container .mat-tab-label{min-width:-moz-fit-content;min-width:fit-content;opacity:1}  .calendar-tab-group.mat-tab-group .mat-tab-header .mat-tab-label-container .mat-tab-label .mat-tab-label-content{font-weight:700;font-size:16px;line-height:150%;color:var(--color-darkestBlue)}.header-date-con[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:end;height:100%;padding:24px;border-bottom:2px solid rgba(178,175,190,.2)}.header-date-con[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:var(--color-darkestBlue)}.header-date-con[_ngcontent-%COMP%]   .arrow-btn[_ngcontent-%COMP%]{width:24px;height:24px;background:none;border:none;outline:none;padding:0}.day-view-con[_ngcontent-%COMP%]     .cal-week-view{border-top:none;padding-top:24px;background:var(--color-offWhite)}.day-view-con[_ngcontent-%COMP%]     .cal-week-view .cal-events-container{margin-left:100px}.day-view-con[_ngcontent-%COMP%]     .cal-week-view .cal-time-events{border:none;background:var(--color-offWhite)}.week-view-con[_ngcontent-%COMP%]     .cal-week-view{border-top:none}.week-view-con[_ngcontent-%COMP%]     .cal-week-view .cal-time-label-column{width:100px}.week-view-con[_ngcontent-%COMP%]     .cal-week-view .cal-time-events{border:none;background:var(--color-offWhite)}.week-view-con[_ngcontent-%COMP%]     .cal-week-view .cal-time-events .cal-day-columns .cal-day-column:first-child{border-left:none}.cal-event-con[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.cal-event-con[_ngcontent-%COMP%]   .event-con[_ngcontent-%COMP%]::-webkit-scrollbar{height:4px;width:4px}.cal-event-con[_ngcontent-%COMP%]   .event-con[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:2px}.cal-event-con[_ngcontent-%COMP%]   .event-con[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:2px}.cal-event-con[_ngcontent-%COMP%]   .event-con[_ngcontent-%COMP%]{width:calc(100% - 10px);height:calc(100% - 5px);background:var(--color-white);box-shadow:0 4px 8px #1f1c3a0a;border-radius:8px;padding:16px;display:flex;flex-wrap:nowrap;overflow-x:auto;justify-content:space-between;align-items:center}.cal-event-con[_ngcontent-%COMP%]   .event-con[_ngcontent-%COMP%]   .con-item[_ngcontent-%COMP%]{display:flex;align-items:center;flex-shrink:0;margin:0 5px}.cal-event-con[_ngcontent-%COMP%]   .event-con[_ngcontent-%COMP%]   .con-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%}.cal-event-con[_ngcontent-%COMP%]   .event-con[_ngcontent-%COMP%]   .con-item[_ngcontent-%COMP%]   .con-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.cal-event-con[_ngcontent-%COMP%]   .event-con[_ngcontent-%COMP%]   .con-item[_ngcontent-%COMP%]   .con-info[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:var(--color-darkestBlue);font-size:16px;font-weight:700}.cal-event-con[_ngcontent-%COMP%]   .event-con[_ngcontent-%COMP%]   .con-item[_ngcontent-%COMP%]   .con-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:var(--color-gray)}.cal-hour-segment-con[_ngcontent-%COMP%]{background:var(--color-offWhite);border-top:1px solid rgba(178,175,190,.2)}.cal-hour-segment-con[_ngcontent-%COMP%]   .cal-time-con[_ngcontent-%COMP%]{position:relative;background:var(--color-white);font-weight:700;font-size:16px;line-height:150%;color:var(--color-gray);text-transform:lowercase;height:101%;width:98px}.cal-hour-segment-con[_ngcontent-%COMP%]   .cal-time-con[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;top:-13px;right:0;left:0;text-align:center;background:var(--color-white)}.cal-hour-segment-con[_ngcontent-%COMP%]   .cal-time-con[_ngcontent-%COMP%]   .marker[_ngcontent-%COMP%]{position:absolute;top:50%;right:0;width:32px;height:0px;text-align:center;background:var(--color-white);border:1px solid rgba(178,175,190,.2);transform:translateY(-50%)}.cal-hour-segment-con.dayOff[_ngcontent-%COMP%]{background:#F0EFF7}.cal-current-time-marker[_ngcontent-%COMP%]{height:3px;background:var(--color-green);position:relative;margin-left:100px;width:calc(100% - 100px)}.cal-current-time-marker[_ngcontent-%COMP%]   .round[_ngcontent-%COMP%]{position:absolute;width:15px;height:15px;background:var(--color-green);top:50%;left:0;transform:translateY(-50%);border-radius:50%}.cal-current-time-marker-2[_ngcontent-%COMP%]{height:3px;background:var(--color-green);position:absolute;width:100%}.cal-current-time-marker-2[_ngcontent-%COMP%]   .round[_ngcontent-%COMP%]{position:absolute;width:10px;height:10px;background:var(--color-green);top:50%;left:0;transform:translateY(-50%);border-radius:50%}.cal-day-headers-con[_ngcontent-%COMP%]{display:flex;padding-left:100px;background:var(--color-white)}.cal-day-headers-con[_ngcontent-%COMP%]   .cal-header-con[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;flex:1;text-align:center;padding:10px 5px;font-weight:700;font-size:16px;line-height:150%;color:var(--color-gray)}.cal-day-headers-con[_ngcontent-%COMP%]   .cal-header-con.cal-today[_ngcontent-%COMP%]{background:#4B39B7!important;color:var(--color-white)!important}.cal-day-headers-con[_ngcontent-%COMP%]   .cal-header-con.dayOff[_ngcontent-%COMP%]{background:#F5F5F7}.cal-event-con-2[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.cal-event-con-2[_ngcontent-%COMP%]   .event-con[_ngcontent-%COMP%]{width:calc(100% - 2px);height:calc(100% - 2px);background:var(--color-white);box-shadow:0 4px 8px #1f1c3a0a;border-radius:8px;padding:10px 6px;display:flex;flex-wrap:nowrap;flex-direction:column;overflow:hidden;justify-content:center}.cal-event-con-2[_ngcontent-%COMP%]   .event-con[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:var(--color-darkBlue);font-size:14px;font-weight:700;overflow:hidden;white-space:nowrap;max-width:120px;text-overflow:ellipsis;width:100%}.cal-event-con-2[_ngcontent-%COMP%]   .event-con[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;color:var(--color-gray);overflow:hidden;white-space:nowrap;max-width:120px;width:100%;text-overflow:ellipsis}.cal-event-con-2[_ngcontent-%COMP%]   .event-con[_ngcontent-%COMP%]   .con-item[_ngcontent-%COMP%]{display:flex;align-items:center;flex-shrink:0;flex-wrap:nowrap;margin:5px 0}.cal-event-con-2[_ngcontent-%COMP%]   .event-con[_ngcontent-%COMP%]   .con-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%}.cal-event-con-2[_ngcontent-%COMP%]   .event-con[_ngcontent-%COMP%]   .con-item[_ngcontent-%COMP%]   .con-info[_ngcontent-%COMP%]{display:flex}.cal-event-con-2[_ngcontent-%COMP%]   .event-con[_ngcontent-%COMP%]   .con-item[_ngcontent-%COMP%]   .con-info[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:var(--color-darkestBlue);max-width:80px}.cal-cell-row-con[_ngcontent-%COMP%]{display:flex;background:var(--color-white);text-align:center;font-weight:700;font-size:16px;color:var(--color-gray)}.cal-cell-row-con[_ngcontent-%COMP%]   .cal-cell-con[_ngcontent-%COMP%]{padding:10px 0;overflow:hidden;text-overflow:ellipsis;display:block;white-space:nowrap;float:left;flex:1}.cal-cell-row-con[_ngcontent-%COMP%]   .cal-cell-con.dayOff[_ngcontent-%COMP%]{background:#F5F5F7}.cal-cell-top-con[_ngcontent-%COMP%]{flex:1;min-height:150px;background:transparent;border-radius:8px}.cal-events-con[_ngcontent-%COMP%]{flex:1;justify-content:flex-end;line-height:10px;display:flex;flex-direction:column;flex-wrap:wrap;position:absolute;inset:38px 0 5px;pointer-events:none}.cal-events-con[_ngcontent-%COMP%]   .event-badge[_ngcontent-%COMP%]{font-size:14px;line-height:150%;font-weight:700;color:var(--color-darkBlue);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding:0 5px;width:100%}.cal-events-con[_ngcontent-%COMP%]   .cal-event-con2[_ngcontent-%COMP%]{padding:0 5px;font-size:12px;line-height:150%;color:var(--color-gray);width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.dayOff[_ngcontent-%COMP%]   .cal-cell-top-con[_ngcontent-%COMP%]{background:#F0EFF7}.dayOff[_ngcontent-%COMP%]   .cal-cell-top-con[_ngcontent-%COMP%]   .day-off-con[_ngcontent-%COMP%]{display:block}.day-off-con[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:var(--color-lightGray);border-radius:4px;font-size:14px;line-height:150%;color:var(--color-darkestBlue);padding:4px 8px;display:none;box-shadow:8px 4px 8px #1f1c3a0a}  .cal-month-view .cal-day-cell.cal-has-events .day-off-con{top:20%;transform:translate(-50%,-20%)}  .cal-month-view .cal-cell{position:relative}  .cal-month-view .cal-day-number-con{padding:4px;border-radius:50%;background:var(--color-white);box-shadow:0 4px 8px #1f1c3a0a;font-size:14px;line-height:150%;font-weight:700;color:var(--color-darkestBlue);margin:5px;display:inline-block;width:30px;height:30px;text-align:center}  .cal-month-view .cal-day-cell.cal-has-events .cal-cell-top-con{background:var(--color-white)}  .cal-month-view .cal-day-cell.cal-has-events .cal-day-number-con{background:var(--color-lightGray)!important;color:var(--color-darkestBlue)!important}  .cal-month-view .cal-day-cell.cal-today .cal-cell-top-con{background:var(--color-lightGray)!important}  .cal-month-view .cal-day-cell.cal-out-month .cal-day-number-con{opacity:.56;cursor:default}  .cal-month-view .cal-day-cell.cal-today .cal-day-number-con{background:var(--color-darkBlue)!important;color:var(--color-white)!important}  .cal-month-view .cal-day-cell.cal-out-month .cal-events-con{opacity:.56;pointer-events:none}  .cal-month-view .cal-days{border:0;border-bottom:0;background:var(--color-offWhite)}  .cal-month-view .cal-day-cell.cal-weekend .cal-day-number-con{background:#F3F2F7;color:#7d7a92}@media (max-width: 768px){.header-date-con[_ngcontent-%COMP%]{justify-content:center}.day-view-con[_ngcontent-%COMP%]     .cal-week-view .cal-events-container{margin-left:70px}.week-view-con[_ngcontent-%COMP%]     .cal-week-view .cal-time-label-column{width:70px}.cal-hour-segment-con[_ngcontent-%COMP%]   .cal-time-con[_ngcontent-%COMP%]{width:70px;font-size:12px}.cal-current-time-marker[_ngcontent-%COMP%]{margin-left:70px;width:calc(100% - 70px)}.cal-current-time-marker[_ngcontent-%COMP%]   .round[_ngcontent-%COMP%]{width:10px;height:10px}.cal-day-headers-con[_ngcontent-%COMP%]{padding-left:70px}.cal-day-headers-con[_ngcontent-%COMP%]   .cal-header-con[_ngcontent-%COMP%], .cal-cell-row-con[_ngcontent-%COMP%]{font-size:12px}  .cal-month-view .cal-day-number-con{padding:3px;font-size:12px;width:24px;height:24px}.day-off-con[_ngcontent-%COMP%]{font-size:8px}}"]}),r})();var O=h(6201),a=h(4006),F=h(1279),x=h(8796),C=h(7021);const ye=["picker3"];function Ce(r,c){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"li",52),e.NdJ("click",function(){const i=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.selectMonth(i.name,i.year))}),e.TgZ(2,"span",53),e._uU(3),e.ALo(4,"translate"),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"mat-icon"),e._uU(7,"keyboard_arrow_right"),e.qZA()(),e.BQk()}if(2&r){const t=c.$implicit,n=e.oxw();e.xp6(1),e.ekj("selected",n.selectedMonth&&n.selectedMonth.name==t.name),e.xp6(2),e.AsE("",e.lcZ(4,4,t.name)," ",e.lcZ(5,6,t.year),"")}}function Me(r,c){1&r&&(e._uU(0),e.ALo(1,"translate")),2&r&&e.hij(" ",e.lcZ(1,1,c.item.shortName),", ")}function xe(r,c){if(1&r&&(e.TgZ(0,"div",66),e._UZ(1,"input",67),e.TgZ(2,"div",68),e._UZ(3,"img",69),e.TgZ(4,"label"),e._uU(5),e.ALo(6,"translate"),e.qZA()()()),2&r){const t=c.item,n=c.item$;e.xp6(1),e.Q6J("checked",n.selected),e.xp6(4),e.Oqu(e.lcZ(6,2,t.name))}}function be(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"div",56),e._UZ(3,"ng-select",57)(4,"ng-select",58),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"td")(7,"div",56),e._UZ(8,"ng-select",59)(9,"ng-select",60),e.ALo(10,"translate"),e.qZA()(),e.TgZ(11,"td")(12,"ng-select",61),e.ALo(13,"translate"),e.YNc(14,Me,2,3,"ng-template",62),e.YNc(15,xe,7,4,"ng-template",63),e.qZA()(),e.TgZ(16,"td")(17,"button",64),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().index,i=e.oxw();return e.KtG(i.deleteSlot(o))}),e._UZ(18,"img",65),e._uU(19),e.ALo(20,"translate"),e.qZA()()()}if(2&r){const t=e.oxw(2);e.xp6(3),e.Q6J("items",t.timeList)("placeholder",t.timeList[0].name)("clearable",!1)("searchable",!1),e.xp6(1),e.Q6J("items",t.clockTimeAmPM)("placeholder",e.lcZ(5,22,t.clockTimeAmPM[0].name))("clearable",!1)("searchable",!1),e.xp6(4),e.Q6J("items",t.timeList)("placeholder",t.timeList[0].name)("clearable",!1)("searchable",!1),e.xp6(1),e.Q6J("items",t.clockTimeAmPM)("placeholder",e.lcZ(10,24,t.clockTimeAmPM[0].name))("clearable",!1)("searchable",!1),e.xp6(3),e.Q6J("items",t.filteredDays)("placeholder",e.lcZ(13,26,null==t.filteredDays[0]?null:t.filteredDays[0].shortName))("closeOnSelect",!1)("clearable",!1)("searchable",!1),e.xp6(7),e.hij(" ",e.lcZ(20,28,"Delete")," ")}}function Te(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td",70)(2,"a",71),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.toggleAddMoreTiming())}),e._UZ(3,"img",17),e._uU(4),e.ALo(5,"translate"),e.qZA()()()}if(2&r){const t=e.oxw(2);e.xp6(2),e.ekj("disbled",0==t.filteredDays.length),e.xp6(2),e.hij(" ",e.lcZ(5,3,"Add more timings")," ")}}function Oe(r,c){1&r&&(e._uU(0),e.ALo(1,"translate")),2&r&&e.hij(" ",e.lcZ(1,1,c.item.shortName),", ")}function ke(r,c){if(1&r&&(e.TgZ(0,"div",66),e._UZ(1,"input",67),e.TgZ(2,"div",68),e._UZ(3,"img",69),e.TgZ(4,"label"),e._uU(5),e.ALo(6,"translate"),e.qZA()()()),2&r){const t=c.item,n=c.item$;e.xp6(1),e.Q6J("checked",n.selected),e.xp6(4),e.Oqu(e.lcZ(6,2,t.name))}}function Se(r,c){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"div",56),e._UZ(3,"ng-select",72)(4,"ng-select",73),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"td")(7,"div",56),e._UZ(8,"ng-select",74)(9,"ng-select",75),e.ALo(10,"translate"),e.qZA()(),e.TgZ(11,"td")(12,"ng-select",76),e.ALo(13,"translate"),e.YNc(14,Oe,2,3,"ng-template",62),e.YNc(15,ke,7,4,"ng-template",63),e.qZA()(),e.TgZ(16,"td")(17,"button",77),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.save())}),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"button",78),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.toggleAddMoreTiming())}),e._uU(21),e.ALo(22,"translate"),e.qZA()()()}if(2&r){const t=e.oxw().$implicit,n=e.oxw();e.xp6(3),e.ekj("invalid-input",n.submitted&&t.controls.startTime.errors),e.Q6J("items",n.timeList)("placeholder",n.timeList[0].name)("clearable",!1)("searchable",!1),e.xp6(1),e.ekj("invalid-input",n.submitted&&t.controls.startMeridiem.errors),e.Q6J("items",n.clockTimeAmPM)("placeholder",e.lcZ(5,33,n.clockTimeAmPM[0].name))("clearable",!1)("searchable",!1),e.xp6(4),e.ekj("invalid-input",n.submitted&&t.controls.endTime.errors),e.Q6J("items",n.timeList)("placeholder",n.timeList[0].name)("clearable",!1)("searchable",!1),e.xp6(1),e.ekj("invalid-input",n.submitted&&t.controls.endMeridiem.errors),e.Q6J("items",n.clockTimeAmPM)("placeholder",e.lcZ(10,35,n.clockTimeAmPM[0].name))("clearable",!1)("searchable",!1),e.xp6(3),e.ekj("invalid-input",n.submitted&&t.controls.days.errors),e.Q6J("items",n.filteredDays)("placeholder",e.lcZ(13,37,null==n.filteredDays[0]?null:n.filteredDays[0].shortName))("closeOnSelect",!1)("clearable",!1)("searchable",!1),e.xp6(6),e.hij(" ",e.lcZ(19,39,"Save")," "),e.xp6(3),e.hij(" ",e.lcZ(22,41,"Cancel")," ")}}function De(r,c){if(1&r&&(e.ynx(0)(1,54),e.YNc(2,be,21,30,"tr",55),e.YNc(3,Te,6,5,"tr",55),e.YNc(4,Se,23,43,"tr",55),e.BQk()()),2&r){const t=c.index,n=c.last,o=e.oxw();e.xp6(1),e.Q6J("formGroupName",t),e.xp6(1),e.Q6J("ngIf",!n),e.xp6(1),e.Q6J("ngIf",!o._addMoreTiming&&n),e.xp6(1),e.Q6J("ngIf",o._addMoreTiming&&n)}}function Ae(r,c){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",79)(2,"span"),e._uU(3),e.ALo(4,"date"),e.qZA(),e.TgZ(5,"button",80),e.NdJ("click",function(){const i=e.CHM(t).index,l=e.oxw();return e.KtG(l.removeDaysOff(i))}),e.TgZ(6,"mat-icon"),e._uU(7,"close"),e.qZA()()(),e.BQk()}if(2&r){const t=c.$implicit,n=c.index;e.xp6(3),e.Oqu(e.xi3(4,2,t.value,"dd MMM YYYY")),e.xp6(2),e.uIk("data-test-id","btnRemoveDaysOff"+n)}}const Ze={parse:{dateInput:{month:"short",year:"numeric",day:"numeric"}},display:{dateInput:"input",monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let Pe=(()=>{class r extends O.LF{format(t,n){return"input"===n?(0,v.p6)(t,"dd MMM, yyyy",this.locale):t.toDateString()}}return r.\u0275fac=function(){let c;return function(n){return(c||(c=e.n5z(r)))(n||r)}}(),r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac}),r})();const Ie=[{path:"",redirectTo:"/calendar/setup-calendar",pathMatch:"full"},{path:"view-calendar",component:we,data:{breadcrumb:"View Calendar"}},{path:"setup-calendar",component:(()=>{class r{constructor(t,n,o,i,l){this.appointmentService=t,this.pageTitleService=n,this.toastr=o,this.coreService=i,this.translateService=l,this.days=[{id:1,name:"Monday",shortName:"Mon"},{id:2,name:"Tuesday",shortName:"Tue"},{id:3,name:"Wednesday",shortName:"Wed"},{id:4,name:"Thursday",shortName:"Thu"},{id:5,name:"Friday",shortName:"Fri"},{id:6,name:"Saturday",shortName:"Sat"},{id:7,name:"Sunday",shortName:"Sun"}],this.timeList=[{id:1,name:"9:00"},{id:2,name:"10:00"},{id:3,name:"11:00"},{id:4,name:"12:00"},{id:5,name:"1:00"},{id:6,name:"2:00"},{id:7,name:"3:00"},{id:8,name:"4:00"},{id:9,name:"5:00"},{id:10,name:"6:00"},{id:11,name:"7:00"},{id:12,name:"8:00"}],this.clockTimeAmPM=[{id:1,name:"AM"},{id:2,name:"PM"}],this.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],this.scheduledMonths=[],this._addMoreTiming=!1,this.daysOffSelected=[],this.filteredDays=[],this.submitted=!1,this.isDayOff=d=>{const s=m(d.getFullYear()+"-"+("00"+(d.getMonth()+1)).slice(-2)+"-"+("00"+d.getDate()).slice(-2)).format("YYYY-MM-DD HH:mm:ss");return this.daysOffSelected.find(p=>p==s)?"dayOffDate":null},this.addSlotsForm=new a.cw({drName:new a.NI(this.drName,a.kI.required),userUuid:new a.NI(this.userId,a.kI.required),speciality:new a.NI(this.getSpeciality(),a.kI.required),type:new a.NI("month",a.kI.required),month:new a.NI(null,a.kI.required),year:new a.NI(null,a.kI.required),startDate:new a.NI(null,a.kI.required),endDate:new a.NI(null,a.kI.required),slotDays:new a.NI(""),slotSchedule:new a.Oe([]),timings:new a.Oe([]),daysOff:new a.Oe([])})}get f(){return this.addSlotsForm.controls}get ft(){return this.addSlotsForm.get("timings")}get fd(){return this.addSlotsForm.get("daysOff")}get fs(){return this.addSlotsForm.get("slotSchedule")}ngOnInit(){this.pageTitleService.setTitle({title:"",imgUrl:"assets/svgs/menu-calendar-circle.svg"}),this.getScheduledMonths()}addMonth(){let t=(new Date).getFullYear(),n=(new Date).getMonth(),o=this.scheduledMonths.length?this.scheduledMonths[this.scheduledMonths.length-1]:{name:this.monthNames[n],year:t.toString()},i=this.monthNames.indexOf(o.name);if(i>=0){let l=new Date(+o.year,i+1,1);-1!=[t,t+1].indexOf(l.getFullYear())&&this.scheduledMonths.push({name:this.monthNames[l.getMonth()],year:l.getFullYear().toString()})}}selectMonth(t,n){this.selectedMonth.name!=t&&(this.selectedMonth={name:t,year:n},this.getSchedule(n,t),this.submitted=!1)}getMinMaxDate(){let t=m(),n=m(`${this.selectedMonth.year}-${this.selectedMonth.name}-1`,"YYYY-MMMM-D"),o=m(`${this.selectedMonth.year}-${this.selectedMonth.name}-1`,"YYYY-MMMM-D").endOf("month");this.minDate=n<t?t.format("YYYY-MM-DD"):n.format("YYYY-MM-DD"),this.maxDate=o.format("YYYY-MM-DD")}getScheduledMonths(){this.appointmentService.getScheduledMonths(this.userId,(new Date).getFullYear().toString()).subscribe({next:t=>{this.scheduledMonths=t.data,0===this.scheduledMonths.length?(this.scheduledMonths.push({name:this.monthNames[(new Date).getMonth()],year:(new Date).getFullYear().toString()}),this.getSchedule(this.scheduledMonths[0].year,this.scheduledMonths[0].name),this.selectedMonth={name:this.scheduledMonths[0].name,year:this.scheduledMonths[0].year}):(this.selectedMonth=this.scheduledMonths.find(n=>n.name==this.monthNames[(new Date).getMonth()]&&n.year==(new Date).getFullYear().toString()),this.selectedMonth?this.getSchedule(this.selectedMonth.year,this.selectedMonth.name):(this.getSchedule(this.scheduledMonths[0].year,this.scheduledMonths[0].name),this.selectedMonth={name:this.scheduledMonths[0].name,year:this.scheduledMonths[0].year}))}})}getSchedule(t=m(this.minDate).format("YYYY"),n=m(this.minDate).format("MMMM")){this.appointmentService.getUserAppoitment(this.userId,t,n).subscribe({next:o=>{o&&o.data?(this.selectedMonthSchedule=o.data,this.selectedMonthSchedule.added=!0,this.setData(o.data)):(this.selectedMonthSchedule={added:!1,month:n,year:t,startDate:null,endDate:null,slotDays:"",slotSchedule:[],timings:[],daysOff:[]},this.setData(this.selectedMonthSchedule)),this.getMinMaxDate()}})}setData(t){this.scheduledMonths.some(o=>o.name===t.month)||this.scheduledMonths.push({name:t.month,year:t.year}),this.ft.clear(),this.fd.clear(),this.fs.clear();let n=[];for(let o=0;o<t.slotSchedule.length;o++)-1==n.findIndex(i=>i.startTime==t.slotSchedule[o].startTime&&i.endTime==t.slotSchedule[o].endTime)&&n.push(t.slotSchedule[o]);n.forEach(o=>{let i=t.slotSchedule.filter(d=>d.startTime==o.startTime&&d.endTime==o.endTime),l=new a.cw({startTime:new a.NI({value:o.startTime.split(" ")[0],disabled:!0},a.kI.required),startMeridiem:new a.NI({value:o.startTime.split(" ")[1],disabled:!0},a.kI.required),endTime:new a.NI({value:o.endTime.split(" ")[0],disabled:!0},a.kI.required),endMeridiem:new a.NI({value:o.endTime.split(" ")[1],disabled:!0},a.kI.required),days:new a.NI({value:[...new Set(i.map(d=>d.day))].map(d=>d.slice(0,3)),disabled:!0},a.kI.required),slots:this.getSlotsArray(i)});this.ft.push(l)}),this.ft.push(new a.cw({startTime:new a.NI(null,a.kI.required),startMeridiem:new a.NI(null,a.kI.required),endTime:new a.NI(null,a.kI.required),endMeridiem:new a.NI(null,a.kI.required),days:new a.NI(null,a.kI.required),slots:new a.Oe([])})),t.daysOff&&t.daysOff.forEach(o=>{this.fd.push(new a.NI(m(o,"DD/MM/YYYY").format("YYYY-MM-DD HH:mm:ss"),a.kI.required))}),this.addSlotsForm.patchValue({month:this.selectedMonth.name,year:this.selectedMonth.year,startDate:t.startDate?m(t.startDate).format("YYYY-MM-DD"):null,endDate:t.endDate?m(t.endDate).format("YYYY-MM-DD"):null,slotDays:""}),this.daysOffSelected=[],this.filteredDays=[],this.days.forEach((o,i)=>{0===t.slotSchedule.filter(d=>o.name==d.day).length&&this.filteredDays.push(o)})}getSlotsArray(t){let n=new a.Oe([]);return t.forEach(o=>{let i;i=new a.cw({id:new a.NI(o.id,a.kI.required),day:new a.NI(o.day,a.kI.required),date:new a.NI(m(o.date).format("YYYY-MM-DD HH:mm:ss"),a.kI.required),startTime:new a.NI(o.startTime,a.kI.required),endTime:new a.NI(o.endTime,a.kI.required)}),n.push(i)}),n}toggleAddMoreTiming(){this._addMoreTiming=!this._addMoreTiming}getSlotsFormArray(t){return this.ft.at(t).get("slots")}save(){if(this.submitted=!0,this.fs.clear(),this.addSlotsForm.invalid)return;if(m(this.addSlotsForm.value.startDate)>m(this.addSlotsForm.value.endDate))return void this.toastr.warning(this.translateService.instant("Start date should greater than end date."),this.translateService.instant("Invalid Dates!"));let t=0,n=[...this.ft.getRawValue()];for(let i=0;i<n.length;i++){if(!this.validateTimeSlot({startTime:`${n[i].startTime} ${n[i].startMeridiem}`,endTime:`${n[i].endTime} ${n[i].endMeridiem}`})){this.toastr.warning(this.translateService.instant("Slot start time should be less than end time."),this.translateService.instant("Invalid Slot Timings!")),t=1;break}{let l=this.createSlots(n[i].days,`${n[i].startTime} ${n[i].startMeridiem}`,`${n[i].endTime} ${n[i].endMeridiem}`),d=[...this.getSlotsFormArray(i).value];this.getSlotsFormArray(i).clear();for(let s=0;s<d.length;s++)l.find(p=>p.date==d[s].date&&p.day==d[s].day)&&(this.getSlotsFormArray(i).push(new a.cw({id:new a.NI(d[s].id,a.kI.required),day:new a.NI(d[s].day,a.kI.required),date:new a.NI(d[s].date,a.kI.required),startTime:new a.NI(d[s].startTime,a.kI.required),endTime:new a.NI(d[s].endTime,a.kI.required)})),this.fs.push(new a.cw({id:new a.NI(d[s].id,a.kI.required),day:new a.NI(d[s].day,a.kI.required),date:new a.NI(d[s].date,a.kI.required),startTime:new a.NI(d[s].startTime,a.kI.required),endTime:new a.NI(d[s].endTime,a.kI.required)})));d=[...this.getSlotsFormArray(i).value];for(let s=0;s<l.length;s++)d.find(p=>p.date==l[s].date&&p.day==l[s].day)||(this.getSlotsFormArray(i).push(new a.cw({id:new a.NI(l[s].id,a.kI.required),day:new a.NI(l[s].day,a.kI.required),date:new a.NI(l[s].date,a.kI.required),startTime:new a.NI(l[s].startTime,a.kI.required),endTime:new a.NI(l[s].endTime,a.kI.required)})),this.fs.push(new a.cw({id:new a.NI(l[s].id,a.kI.required),day:new a.NI(l[s].day,a.kI.required),date:new a.NI(l[s].date,a.kI.required),startTime:new a.NI(l[s].startTime,a.kI.required),endTime:new a.NI(l[s].endTime,a.kI.required)})));i==n.length-1&&this.addSlotsForm.get("slotDays").setValue([...new Set([...this.getSlotsFormArray(i).value].map(s=>s.day))].join("||"))}}if(1==t)return;let o={...this.addSlotsForm.value};delete o.timings,delete o.daysOff,this.appointmentService.updateOrCreateAppointment(o).subscribe({next:i=>{i.status&&(this.getSchedule(this.selectedMonth.year,this.selectedMonth.name),this.submitted=!1)}})}deleteSlot(t){this.coreService.openConfirmationDialog({confirmationMsg:"Do you really want to delete this timing slot?",cancelBtnText:"Cancel",confirmBtnText:"Confirm"}).afterClosed().subscribe(n=>{if(n){if(this.fs.clear(),m(this.addSlotsForm.value.startDate)>m(this.addSlotsForm.value.endDate))return void this.toastr.warning(this.translateService.instant("Start date should greater than end date."),this.translateService.instant("Invalid Dates!"));let o=0,i=[...this.ft.getRawValue()];for(let d=0;d<i.length-1;d++)if(d!=t){if(!this.validateTimeSlot({startTime:`${i[d].startTime} ${i[d].startMeridiem}`,endTime:`${i[d].endTime} ${i[d].endMeridiem}`})){this.toastr.warning(this.translateService.instant("Slot start time should be less than end time."),this.translateService.instant("Invalid Slot Timings!")),o=1;break}{let s=this.createSlots(i[d].days,`${i[d].startTime} ${i[d].startMeridiem}`,`${i[d].endTime} ${i[d].endMeridiem}`),p=[...this.getSlotsFormArray(d).value];this.getSlotsFormArray(d).clear();for(let u=0;u<p.length;u++)s.find(_=>_.date==p[u].date&&_.day==p[u].day)&&(this.getSlotsFormArray(d).push(new a.cw({id:new a.NI(p[u].id,a.kI.required),day:new a.NI(p[u].day,a.kI.required),date:new a.NI(p[u].date,a.kI.required),startTime:new a.NI(p[u].startTime,a.kI.required),endTime:new a.NI(p[u].endTime,a.kI.required)})),this.fs.push(new a.cw({id:new a.NI(p[u].id,a.kI.required),day:new a.NI(p[u].day,a.kI.required),date:new a.NI(p[u].date,a.kI.required),startTime:new a.NI(p[u].startTime,a.kI.required),endTime:new a.NI(p[u].endTime,a.kI.required)})));p=[...this.getSlotsFormArray(d).value];for(let u=0;u<s.length;u++)p.find(_=>_.date==s[u].date&&_.day==s[u].day)||(this.getSlotsFormArray(d).push(new a.cw({id:new a.NI(s[u].id,a.kI.required),day:new a.NI(s[u].day,a.kI.required),date:new a.NI(s[u].date,a.kI.required),startTime:new a.NI(s[u].startTime,a.kI.required),endTime:new a.NI(s[u].endTime,a.kI.required)})),this.fs.push(new a.cw({id:new a.NI(s[u].id,a.kI.required),day:new a.NI(s[u].day,a.kI.required),date:new a.NI(s[u].date,a.kI.required),startTime:new a.NI(s[u].startTime,a.kI.required),endTime:new a.NI(s[u].endTime,a.kI.required)})));this.addSlotsForm.get("slotDays").setValue("")}}if(1==o)return;let l={...this.addSlotsForm.value};delete l.timings,delete l.daysOff,this.appointmentService.updateOrCreateAppointment(l).subscribe({next:d=>{d.status&&(this.getSchedule(this.selectedMonth.year,this.selectedMonth.name),this.submitted=!1)}})}})}validateTimeSlot(t){return!(m(t.startTime,["h:mm A"]).format("HH:mm:ss")>=m(t.endTime,["h:mm A"]).format("HH:mm:ss"))}createSlots(t,n,o){let i=[];const l=m(this.addSlotsForm.value.startDate).format("YYYY-MM-DD"),d=m(this.addSlotsForm.value.endDate).format("YYYY-MM-DD"),s=[...this.fd.value];let p=m(l);for(;p<=m(d);){const u=p.format("ddd");t.includes(u)&&!s.includes(p.format("YYYY-MM-DD HH:mm:ss"))&&i.push({id:this.getUniqueId(),day:p.format("dddd"),date:p.format("YYYY-MM-DD HH:mm:ss"),startTime:n,endTime:o}),p.add(1,"day")}return i}dayOffSelected(t){if(t.value){const n=m(t.value).format("YYYY-MM-DD HH:mm:ss"),o=this.daysOffSelected.indexOf(n);o<0?this.daysOffSelected.push(n):this.daysOffSelected.splice(o,1),this._picker.select(void 0),this._picker.close()}}resetSelectedDaysOff(){this.daysOffSelected=[]}saveDaysOff(){this.daysOffSelected.length?this.coreService.openConfirmationDialog({confirmationMsg:"Do you really want to save these days off ?",cancelBtnText:"Cancel",confirmBtnText:"Confirm"}).afterClosed().subscribe(t=>{if(t){let n=[...new Set([...this.fd.value].concat(this.daysOffSelected))].map(o=>m(o,"YYYY-MM-DD HH:mm:ss").format("DD/MM/YYYY"));if(this.selectedMonthSchedule.added)this.appointmentService.updateDaysOff({userUuid:this.userId,daysOff:n,month:this.selectedMonth.name,year:this.selectedMonth.year}).subscribe({next:i=>{i.status&&(this.daysOffSelected.forEach(l=>{this.fd.push(new a.NI(l,a.kI.required))}),this.daysOffSelected=[],this.updateSlot())}});else{if(m(this.minDate).isAfter(this.maxDate))return void this.toastr.warning(this.translateService.instant("Can't add daysOff's for the past dates!"),this.translateService.instant("Can't add daysOff's"));let o={...this.addSlotsForm.value};delete o.timings,delete o.daysOff,o.startDate=m(this.minDate,"YYYY-MM-DD").toISOString(),o.endDate=m(this.maxDate,"YYYY-MM-DD").toISOString(),this.appointmentService.updateOrCreateAppointment(o).subscribe({next:i=>{i.status&&this.appointmentService.updateDaysOff({userUuid:this.userId,daysOff:n,month:this.selectedMonth.name,year:this.selectedMonth.year}).subscribe({next:d=>{d.status&&(this.daysOffSelected=[],this.getSchedule(this.selectedMonth.year,this.selectedMonth.name))}})}})}}}):this.toastr.warning(this.translateService.instant("Please select atleast 1 date for day off."),this.translateService.instant("Select dates!"))}removeDaysOff(t){this.coreService.openConfirmationDialog({confirmationMsg:"Do you really want to remove this day off ?",cancelBtnText:"Cancel",confirmBtnText:"Confirm"}).afterClosed().subscribe(n=>{if(n){let o=[...this.fd.value];o.splice(t,1),o=[...new Set(o)].map(l=>m(l,"YYYY-MM-DD HH:mm:ss").format("DD/MM/YYYY")),this.appointmentService.updateDaysOff({userUuid:this.userId,daysOff:o,month:this.selectedMonth.name,year:this.selectedMonth.year}).subscribe({next:l=>{l.status&&(this.fd.removeAt(t),this.updateSlot())}})}})}get daysOffDates(){let t="";return this.daysOffSelected.forEach(n=>{t+=`${m(n).format("DD MMM")}, `}),t}getUniqueId(){return Math.random().toString(36).substr(2,9)}get userId(){return(0,w.TL)(!0,g.On.USER).uuid}get drName(){return(0,w.TL)(!0,g.On.USER)?.person?.display||(0,w.TL)(!0,g.On.USER)?.display}getSpeciality(){return(0,w.TL)(!0,g.On.PROVIDER).attributes.find(t=>t.display.includes(g.On.SPECIALIZATION))?.value}updateSlot(){if(this.fs.clear(),m(this.addSlotsForm.value.startDate)>m(this.addSlotsForm.value.endDate))return void this.toastr.warning(this.translateService.instant("Start date should greater than end date."),this.translateService.instant("Invalid Dates!"));let t=0,n=[...this.ft.getRawValue()];for(let i=0;i<n.length-1;i++){if(!this.validateTimeSlot({startTime:`${n[i].startTime} ${n[i].startMeridiem}`,endTime:`${n[i].endTime} ${n[i].endMeridiem}`})){this.toastr.warning(this.translateService.instant("Slot start time should be less than end time."),this.translateService.instant("Invalid Slot Timings!")),t=1;break}{let l=this.createSlots(n[i].days,`${n[i].startTime} ${n[i].startMeridiem}`,`${n[i].endTime} ${n[i].endMeridiem}`),d=[...this.getSlotsFormArray(i).value];this.getSlotsFormArray(i).clear();for(let s=0;s<d.length;s++)l.find(p=>p.date==d[s].date&&p.day==d[s].day)&&(this.getSlotsFormArray(i).push(new a.cw({id:new a.NI(d[s].id,a.kI.required),day:new a.NI(d[s].day,a.kI.required),date:new a.NI(d[s].date,a.kI.required),startTime:new a.NI(d[s].startTime,a.kI.required),endTime:new a.NI(d[s].endTime,a.kI.required)})),this.fs.push(new a.cw({id:new a.NI(d[s].id,a.kI.required),day:new a.NI(d[s].day,a.kI.required),date:new a.NI(d[s].date,a.kI.required),startTime:new a.NI(d[s].startTime,a.kI.required),endTime:new a.NI(d[s].endTime,a.kI.required)})));d=[...this.getSlotsFormArray(i).value];for(let s=0;s<l.length;s++)d.find(p=>p.date==l[s].date&&p.day==l[s].day)&&(this.getSlotsFormArray(i).push(new a.cw({id:new a.NI(l[s].id,a.kI.required),day:new a.NI(l[s].day,a.kI.required),date:new a.NI(l[s].date,a.kI.required),startTime:new a.NI(l[s].startTime,a.kI.required),endTime:new a.NI(l[s].endTime,a.kI.required)})),this.fs.push(new a.cw({id:new a.NI(l[s].id,a.kI.required),day:new a.NI(l[s].day,a.kI.required),date:new a.NI(l[s].date,a.kI.required),startTime:new a.NI(l[s].startTime,a.kI.required),endTime:new a.NI(l[s].endTime,a.kI.required)})));this.addSlotsForm.get("slotDays").setValue("")}}if(1==t)return;let o={...this.addSlotsForm.value};delete o.timings,delete o.daysOff,this.appointmentService.updateOrCreateAppointment(o).subscribe({next:i=>{i.status&&this.getSchedule(this.selectedMonth.year,this.selectedMonth.name)}})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(P.H),e.Y36(Z.Z),e.Y36(Y._W),e.Y36(I.p),e.Y36(M.sK))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-setup-calendar"]],viewQuery:function(t,n){if(1&t&&e.Gf(ye,7),2&t){let o;e.iGM(o=e.CRH())&&(n._picker=o.first)}},features:[e._Bn([{provide:O._A,useClass:Pe},{provide:O.sG,useValue:Ze}])],decls:120,vars:87,consts:[[1,"container-fluid"],[1,"row","setup-title-con"],[1,"col-md-8","p-0","pb-2"],[1,"title-con","d-flex","align-items-center"],["src","assets/svgs/menu-calendar-circle.svg","alt","",1,"mr-2"],[1,"d-flex","flex-column"],[1,"mb-0"],[1,"col-md-4","p-0","pb-2"],["mat-button","","routerLink","/calendar/view-calendar","data-test-id","btnViewCal",1,"view-btn"],[1,"row","mt-3"],[1,"col-md-3","p-1"],[1,"month-con"],[1,"month-title"],[1,"month-list"],[4,"ngFor","ngForOf"],[1,"add-more-list-item"],["href","javascript:void(0)","data-test-id","linkAddMonths",3,"click"],["src","assets/svgs/add-more-plus-icon-green.svg","alt","",1,"mr-2"],[1,"col-md-9","p-1"],[3,"formGroup"],[1,"card","intel-card"],[1,"month-title2"],[1,"card-header"],[1,"mb-0","color-blue"],[1,"card-body"],[1,"form-row"],[1,"form-group","col-md-6"],[1,"input-group"],["type","text","formControlName","startDate","aria-label","Start date","aria-describedby","basic-addon1","readonly","","data-test-id","etSelStartDate",1,"form-control",3,"min","max","matDatepicker","placeholder"],["picker1",""],[1,"input-group-append"],["id","basic-addon1","data-test-id","dpicSelStartDate",1,"input-group-text"],["matSuffix","",3,"for"],["matDatepickerToggleIcon","","src","assets/svgs/calendar-date.svg","alt",""],["type","text","formControlName","endDate","aria-label","End date","aria-describedby","basic-addon2","readonly","","data-test-id","etSelEndDate",1,"form-control",3,"min","max","matDatepicker","placeholder"],["picker2",""],["id","basic-addon2","data-test-id","dpicSelEndDate",1,"input-group-text"],[1,"table-responsive"],["formArrayName","timings","aria-describedby","timings",1,"table"],["scope","col"],["type","text","aria-label","Start date","aria-describedby","basic-addon3","readonly","","data-test-id","etDayOff",1,"form-control",3,"value","placeholder"],["type","text","aria-label","Start date","aria-describedby","basic-addon3","readonly","","data-test-id","etDayOffSelect",1,"form-control","hidden-input",3,"min","max","matDatepicker","placeholder","dateChange"],[3,"panelClass","dateClass"],["picker3",""],["data-test-id","dpicSelDayOff",1,"input-group-append"],["id","basic-addon3",1,"input-group-text"],[1,"col-md-6","pb-3"],[1,"h-100","d-flex","align-items-end"],["mat-button","","type","button","data-test-id","btnSaveDayOff",1,"save-btn","mr-2",3,"click"],["mat-button","","type","button","data-test-id","btnCanelDayOff",1,"cancel-btn",3,"click"],[1,"days-off-chips-con"],["formArrayName","daysOff",1,"days-off-chips"],[1,"list-item",3,"click"],["data-test-id","spSelectMonth"],[3,"formGroupName"],[4,"ngIf"],[1,"d-flex"],["formControlName","startTime","appendTo",".intel-card","bindLabel","name","bindValue","name",1,"customSelect2","mr-2",3,"items","placeholder","clearable","searchable"],["formControlName","startMeridiem","appendTo",".intel-card","bindLabel","name","bindValue","name",1,"customSelect2",3,"items","placeholder","clearable","searchable"],["formControlName","endTime","appendTo",".intel-card","bindLabel","name","bindValue","name",1,"customSelect2","mr-2",3,"items","placeholder","clearable","searchable"],["formControlName","endMeridiem","appendTo",".intel-card","bindLabel","name","bindValue","name",1,"customSelect2",3,"items","placeholder","clearable","searchable"],["formControlName","days","appendTo",".intel-card","bindLabel","shortName","bindValue","shortName","multiple","true",1,"customSelect1",3,"items","placeholder","closeOnSelect","clearable","searchable"],["ng-label-tmp",""],["ng-option-tmp",""],["mat-button","","type","button","data-test-id","btnDeleteSlot",1,"delete-btn",3,"click"],["src","assets/svgs/delete-icon.svg","alt",""],[1,"pretty","p-image","p-plain"],["type","checkbox",3,"checked"],[1,"state"],["src","assets/svgs/checkbox-tick.png","alt","",1,"image"],["colspan","4"],["href","javascript:void(0)","data-test-id","linkAddTime",1,"add-more-btn",3,"click"],["formControlName","startTime","appendTo",".intel-card","bindLabel","name","bindValue","name","data-test-id","selStartTime",1,"customSelect2","mr-2",3,"items","placeholder","clearable","searchable"],["formControlName","startMeridiem","appendTo",".intel-card","bindLabel","name","bindValue","name","data-test-id","selStartAm&Pm",1,"customSelect2",3,"items","placeholder","clearable","searchable"],["formControlName","endTime","appendTo",".intel-card","bindLabel","name","bindValue","name","data-test-id","selEndTime",1,"customSelect2","mr-2",3,"items","placeholder","clearable","searchable"],["formControlName","endMeridiem","appendTo",".intel-card","bindLabel","name","bindValue","name","data-test-id","selEndAm&Pm",1,"customSelect2",3,"items","placeholder","clearable","searchable"],["formControlName","days","appendTo",".intel-card","bindLabel","shortName","bindValue","shortName","multiple","true","data-test-id","selDays",1,"customSelect1",3,"items","placeholder","closeOnSelect","clearable","searchable"],["mat-button","","type","button","data-test-id","btnSaveSlot",1,"save-btn","mr-2",3,"click"],["mat-button","","type","button","data-test-id","btnCanelSlot",1,"cancel-btn",3,"click"],[1,"chip-item"],["mat-icon-button","","type","button",3,"click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"img",4),e.TgZ(5,"div",5)(6,"h6",6),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"p",6),e._uU(10),e.ALo(11,"translate"),e.qZA()()()(),e.TgZ(12,"div",7)(13,"button",8),e._uU(14),e.ALo(15,"translate"),e.qZA()()(),e.TgZ(16,"div",9)(17,"div",10)(18,"div",11)(19,"div",12)(20,"h6",6),e._uU(21),e.ALo(22,"translate"),e.qZA()(),e.TgZ(23,"ul",13),e.YNc(24,Ce,8,8,"ng-container",14),e.TgZ(25,"li",15)(26,"a",16),e.NdJ("click",function(){return n.addMonth()}),e._UZ(27,"img",17),e._uU(28),e.ALo(29,"translate"),e.qZA()()()()(),e.TgZ(30,"div",18)(31,"form",19)(32,"div",20)(33,"div",21)(34,"h6",6),e._uU(35),e.ALo(36,"translate"),e.qZA()(),e.TgZ(37,"div",22)(38,"h6",23),e._uU(39),e.ALo(40,"translate"),e.qZA()(),e.TgZ(41,"div",24)(42,"div",25)(43,"div",26)(44,"label"),e._uU(45),e.ALo(46,"translate"),e.qZA(),e.TgZ(47,"div",27),e._UZ(48,"input",28),e.ALo(49,"translate"),e._UZ(50,"mat-datepicker",null,29),e.TgZ(52,"div",30)(53,"span",31)(54,"mat-datepicker-toggle",32),e._UZ(55,"img",33),e.qZA()()()()(),e.TgZ(56,"div",26)(57,"label"),e._uU(58),e.ALo(59,"translate"),e.qZA(),e.TgZ(60,"div",27),e._UZ(61,"input",34),e.ALo(62,"translate"),e._UZ(63,"mat-datepicker",null,35),e.TgZ(65,"div",30)(66,"span",36)(67,"mat-datepicker-toggle",32),e._UZ(68,"img",33),e.qZA()()()()()(),e.TgZ(69,"div",37)(70,"table",38)(71,"thead")(72,"tr")(73,"th",39),e._uU(74),e.ALo(75,"translate"),e.qZA(),e.TgZ(76,"th",39),e._uU(77),e.ALo(78,"translate"),e.qZA(),e.TgZ(79,"th",39),e._uU(80),e.ALo(81,"translate"),e.qZA(),e._UZ(82,"th",39),e.qZA()(),e.TgZ(83,"tbody"),e.YNc(84,De,5,4,"ng-container",14),e.qZA()()()(),e.TgZ(85,"div",22)(86,"h6",23),e._uU(87),e.ALo(88,"translate"),e.qZA()(),e.TgZ(89,"div",24)(90,"div",25)(91,"div",26)(92,"label"),e._uU(93),e.ALo(94,"translate"),e.qZA(),e.TgZ(95,"div",27),e._UZ(96,"input",40),e.ALo(97,"translate"),e.TgZ(98,"input",41),e.NdJ("dateChange",function(i){return n.dayOffSelected(i)}),e.ALo(99,"translate"),e.qZA(),e._UZ(100,"mat-datepicker",42,43),e.TgZ(102,"div",44)(103,"span",45)(104,"mat-datepicker-toggle",32),e._UZ(105,"img",33),e.qZA()()()()(),e.TgZ(106,"div",46)(107,"div",47)(108,"button",48),e.NdJ("click",function(){return n.saveDaysOff()}),e._uU(109),e.ALo(110,"translate"),e.qZA(),e.TgZ(111,"button",49),e.NdJ("click",function(){return n.resetSelectedDaysOff()}),e._uU(112),e.ALo(113,"translate"),e.qZA()()()(),e.TgZ(114,"div",50)(115,"h6",6),e._uU(116),e.ALo(117,"translate"),e.qZA(),e.TgZ(118,"div",51),e.YNc(119,Ae,8,5,"ng-container",14),e.qZA()()()()()()()()),2&t){const o=e.MAs(51),i=e.MAs(64),l=e.MAs(101);e.xp6(7),e.Oqu(e.lcZ(8,45,"Setup your calendar")),e.xp6(3),e.Oqu(e.lcZ(11,47,"Please set up your scedule for the month according to your availability")),e.xp6(4),e.Oqu(e.lcZ(15,49,"View calendar")),e.xp6(7),e.Oqu(e.lcZ(22,51,"Month")),e.xp6(3),e.Q6J("ngForOf",n.scheduledMonths),e.xp6(4),e.hij(" ",e.lcZ(29,53,"Add more months")," "),e.xp6(3),e.Q6J("formGroup",n.addSlotsForm),e.xp6(4),e.AsE("",e.lcZ(36,55,null==n.selectedMonth?null:n.selectedMonth.name)," ",null==n.selectedMonth?null:n.selectedMonth.year,""),e.xp6(4),e.Oqu(e.lcZ(40,57,"Working days")),e.xp6(6),e.Oqu(e.lcZ(46,59,"Start date")),e.xp6(2),e.ekj("invalid-input",n.submitted&&n.f.startDate.errors),e.xp6(1),e.s9C("placeholder",e.lcZ(49,61,"Select start date")),e.Q6J("min",n.minDate)("max",n.maxDate)("matDatepicker",o),e.xp6(6),e.Q6J("for",o),e.xp6(4),e.Oqu(e.lcZ(59,63,"End date")),e.xp6(2),e.ekj("invalid-input",n.submitted&&n.f.endDate.errors),e.xp6(1),e.s9C("placeholder",e.lcZ(62,65,"Select end date")),e.Q6J("min",n.minDate)("max",n.maxDate)("matDatepicker",i),e.xp6(6),e.Q6J("for",i),e.xp6(7),e.Oqu(e.lcZ(75,67,"Start time")),e.xp6(3),e.Oqu(e.lcZ(78,69,"End time")),e.xp6(3),e.Oqu(e.lcZ(81,71,"Days")),e.xp6(4),e.Q6J("ngForOf",n.ft.controls),e.xp6(3),e.Oqu(e.lcZ(88,73,"Days off")),e.xp6(6),e.Oqu(e.lcZ(94,75,"Dates")),e.xp6(3),e.s9C("placeholder",e.lcZ(97,77,"Select dates")),e.Q6J("value",n.daysOffDates),e.xp6(2),e.s9C("placeholder",e.lcZ(99,79,"Select dates")),e.Q6J("min",n.minDate)("max",n.maxDate)("matDatepicker",l),e.xp6(2),e.Q6J("panelClass","daysOffCalendar")("dateClass",n.isDayOff),e.xp6(4),e.Q6J("for",l),e.xp6(5),e.hij(" ",e.lcZ(110,81,"Save")," "),e.xp6(3),e.hij(" ",e.lcZ(113,83,"Cancel")," "),e.xp6(4),e.Oqu(e.lcZ(117,85,"Your days off")),e.xp6(3),e.Q6J("ngForOf",n.fd.controls)}},dependencies:[v.sg,v.O5,y.rH,F.Hw,b.lW,x.w9,x.ir,x.mR,C.Mq,C.hl,C.nW,C.Q0,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,a.x0,a.CE,L.z,v.uU,M.X$],styles:[".setup-title-con[_ngcontent-%COMP%]   .title-con[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:44px}.setup-title-con[_ngcontent-%COMP%]   .title-con[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-weight:700;font-size:18px;color:var(--color-darkestBlue)}.setup-title-con[_ngcontent-%COMP%]   .title-con[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:var(--color-gray);margin-top:.5rem;line-height:normal}.setup-title-con[_ngcontent-%COMP%]   .view-btn[_ngcontent-%COMP%]{text-decoration:none;background:var(--color-lightGray);border-radius:8px;height:44px;color:var(--color-darkBlue);font-weight:700;font-size:18px;float:right}.month-con[_ngcontent-%COMP%]{background:var(--color-white);box-shadow:0 4px 16px #1f1c3a14;border-radius:12px;padding:0 0 24px;overflow:hidden}.month-con[_ngcontent-%COMP%]   .month-title[_ngcontent-%COMP%]{height:63px;background:var(--color-lightGray);padding:20px 24px 16px}.month-con[_ngcontent-%COMP%]   .month-title[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-weight:700;font-size:18px;color:var(--color-darkestBlue)}.month-con[_ngcontent-%COMP%]   ul.month-list[_ngcontent-%COMP%]{list-style-type:none;padding:0 24px;margin-bottom:0}.month-con[_ngcontent-%COMP%]   ul.month-list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid rgba(178,175,190,.2);font-size:16px;color:var(--color-darkestBlue);padding:15px 0;cursor:pointer}.month-con[_ngcontent-%COMP%]   ul.month-list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 15px}.month-con[_ngcontent-%COMP%]   ul.month-list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:var(--color-gray)}.month-con[_ngcontent-%COMP%]   ul.month-list[_ngcontent-%COMP%]   .list-item.selected[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border-left:3px solid var(--color-lightRed)}.month-con[_ngcontent-%COMP%]   ul.month-list[_ngcontent-%COMP%]   li.add-more-list-item[_ngcontent-%COMP%]{padding:15px 0 0}.month-con[_ngcontent-%COMP%]   ul.month-list[_ngcontent-%COMP%]   li.add-more-list-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:16px;color:var(--color-darkestBlue);text-decoration:none}.month-title2[_ngcontent-%COMP%]{height:63px;background:var(--color-lightGray);padding:20px 24px 16px;border-radius:12px 12px 0 0}.month-title2[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-weight:700;font-size:18px;color:var(--color-darkestBlue)}.color-blue[_ngcontent-%COMP%]{color:var(--color-darkBlue)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;color:var(--color-darkestBlue);font-weight:700}.form-group[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{position:relative;border:1px solid rgba(178,175,190,.2);background:var(--color-offWhite);border-radius:8px}.form-group[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding:14px 16px;height:48px;font-size:16px;color:var(--color-darkestBlue);border:none;background:transparent;text-overflow:ellipsis}.form-group[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{box-shadow:none}.form-group[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control.hidden-input[_ngcontent-%COMP%]{position:absolute;top:0;left:0;z-index:-1}.form-group[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{background:transparent;border:none}.form-group[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background:none;outline:none}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;white-space:nowrap}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700;font-size:14px;line-height:150%;color:var(--color-gray);border:none}.add-more-btn[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:16px;color:var(--color-darkestBlue);text-decoration:none;width:-moz-fit-content;width:fit-content}.delete-btn[_ngcontent-%COMP%]{background:var(--color-white);border:.770833px solid rgba(178,175,190,.2);border-radius:8px;font-weight:700;font-size:18px;line-height:150%;color:var(--color-red);height:48px}.save-btn[_ngcontent-%COMP%]{background:var(--color-darkBlue);border:none;border-radius:8px;font-weight:700;font-size:18px;line-height:150%;color:var(--color-white);height:48px;min-width:100px}.cancel-btn[_ngcontent-%COMP%]{background:var(--color-white);border:.770833px solid rgba(178,175,190,.2);border-radius:8px;font-weight:700;font-size:18px;line-height:150%;color:var(--color-darkBlue);height:48px;min-width:100px}.days-off-chips-con[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-weight:700;font-size:14px;color:var(--color-gray)}.days-off-chips-con[_ngcontent-%COMP%]   .days-off-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding:10px 0}.days-off-chips-con[_ngcontent-%COMP%]   .days-off-chips[_ngcontent-%COMP%]   .chip-item[_ngcontent-%COMP%]{background:var(--color-lightGray);border:1px solid rgba(178,175,190,.2);border-radius:8px;font-size:16px;font-weight:700;color:var(--color-darkBlue);padding:5px 5px 5px 10px;margin:0 5px 5px 0}  .ng-select.customSelect1{min-height:48px;background:var(--color-offWhite);border:.770833px solid rgba(178,175,190,.2);border-radius:8px}  .ng-select.customSelect1 .ng-select-container{background:none!important;min-height:48px;height:100%;border:none}  .ng-select.customSelect1 .ng-select-container .ng-value-container{position:relative;padding-top:0;overflow:hidden;flex-wrap:nowrap!important;width:150px}  .ng-select.customSelect1 .ng-select-container .ng-value-container .ng-placeholder{top:0;padding-bottom:0}  .ng-select.customSelect1 .ng-select-container .ng-value-container .ng-input{padding:0 0 0 3px;font-size:16px;color:var(--color-darkestBlue)}  .ng-select.customSelect1 .ng-select-container .ng-value-container .ng-value{background:none;color:var(--color-darkestBlue);margin:0;font-size:16px}  .ng-select.customSelect1 .ng-arrow-wrapper .ng-arrow{border:none}  .ng-select.customSelect1 .ng-arrow-wrapper .ng-arrow:after{content:url(chevron-down-input.fbed60456e1aa553.svg);position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}  .ng-select.customSelect1.ng-select-multiple.ng-select-disabled>.ng-select-container .ng-value-container .ng-value{background-color:transparent;border:none}.pretty.p-image[_ngcontent-%COMP%]   .state[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:none}  .ng-select.customSelect2{min-height:48px;border-radius:8px;overflow:hidden}  .ng-select.customSelect2 .ng-select-container{min-height:48px;height:100%;border:none}  .ng-select.customSelect2 .ng-select-container .ng-value-container{position:relative;padding-top:0;overflow:hidden;flex-wrap:nowrap!important;width:-moz-fit-content;width:fit-content}  .ng-select.customSelect2 .ng-select-container .ng-value-container .ng-input{top:0;padding-right:10px;font-size:16px;color:var(--color-darkestBlue)}  .ng-select.customSelect2 .ng-select-container:hover{box-shadow:none}  .ng-select.customSelect2 .ng-arrow-wrapper .ng-arrow{border:none}  .ng-select.customSelect2 .ng-arrow-wrapper .ng-arrow:after{content:url(chevron-down-input.fbed60456e1aa553.svg);position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}  .ng-select.customSelect2.ng-select-disabled>.ng-select-container{background-color:transparent}  .daysOffCalendar .mat-calendar-body-cell-content.mat-calendar-body-selected{background:transparent;color:var(--color-darkestBlue)}  .mat-calendar-body-cell.dayOffDate{background:var(--color-green)!important;border-radius:50%}  .mat-calendar-body-cell.dayOffDate .mat-calendar-body-cell-content.mat-calendar-body-selected{background:transparent;color:var(--color-darkestBlue)}.invalid-input[_ngcontent-%COMP%]{border:1px solid red!important}.disbled[_ngcontent-%COMP%]{pointer-events:none;color:gray}@media (max-width: 768px){.setup-title-con[_ngcontent-%COMP%]   .view-btn[_ngcontent-%COMP%]{width:100%}.chip-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:6rem;display:inline-block}}"]}),r})(),data:{breadcrumb:"Setup Calendar"}}];let Ye=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[y.Bz.forChild(Ie),y.Bz]}),r})();var Ne=h(9646),Le=h(1075);let qe=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[v.ez,Ye,F.Ps,b.ot,x.A0,C.FA,a.u5,a.UX,f._8.forRoot({provide:f._A,useFactory:Ne.x}),T.Nh,Le.m]}),r})()}}]);